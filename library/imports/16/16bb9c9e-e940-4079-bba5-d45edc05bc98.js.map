{"version":3,"sources":["../../../../../../assets/scripts/systems/mailSys/assets/scripts/systems/mailSys/mailSysMailMgr.js"],"names":["cc","Class","extends","Component","properties","mailId","relatedMailSectionNode","Node","relatedMailSysMgr","mailOptionNodePrefab","Prefab","disOfContentAndOptionSection","disOfOptionNodes","headerHeight","footerHeight","onLoad","bg","node","getChildByName","width","winSize","height","on","setupContentSection","setupOptionSection","setupUiBg","start","close","destroy","textConfig","require","mailConfig","mail","content","titleLabel","contentLabel","getComponent","Label","string","getTextByIdAndLanguageType","titleTextId","contentTextId","y","optionSection","options","playerData","mails","status","length","okOptionNode","instantiate","okLabelNode","okBgNode","self","onMailReaded","setOneMailReaded","addChild","index","oneOption","optionNode","labelNode","showTextId","bgNode","operationType","operationPara","bindFunction","givenNode","givenOperationType","givenOperationPara","indexOfOptions","mailSysGloableSendOneMail","tag","delay","selectedOptionIndex","selectedOption","color","active","Button","interactable","uibg","contentSection"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,gBAAQ,IAhBA;AAiBRC,gCAAwBN,GAAGO,IAjBnB;AAkBRC,2BAAmB,IAlBX;AAmBRC,8BAAsBT,GAAGU,MAnBjB;AAoBRC,sCAA8B,GApBtB;AAqBRC,0BAAkB,EArBV;AAsBRC,sBAAc,EAtBN;AAuBRC,sBAAc;AAvBN,KAHP;;AA6BL;;AAEAC,UA/BK,oBA+BK;AACN,YAAIC,KAAK,KAAKC,IAAL,CAAUC,cAAV,CAAyB,IAAzB,CAAT;AACAF,WAAGG,KAAH,GAAWnB,GAAGoB,OAAH,CAAWD,KAAtB;AACAH,WAAGK,MAAH,GAAYrB,GAAGoB,OAAH,CAAWC,MAAvB;AACAL,WAAGM,EAAH,CAAM,YAAN,EAAmB,YAAU,CAAE,CAA/B;;AAEA,aAAKC,mBAAL;AACA,aAAKC,kBAAL;AACA,aAAKC,SAAL;AACH,KAxCI;AA0CLC,SA1CK,mBA0CI,CAER,CA5CI;AA8CLC,SA9CK,mBA8CG;AACJ,aAAKV,IAAL,CAAUW,OAAV;AACH,KAhDI;AAkDLL,uBAlDK,iCAkDiB;AAClB,YAAIM,aAAaC,QAAQ,YAAR,CAAjB;AACA,YAAIC,aAAaD,QAAQ,YAAR,CAAjB;AACA,YAAIE,OAAOD,WAAW,KAAK1B,MAAhB,CAAX;AACA,YAAI4B,UAAU,KAAKhB,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,gBAAlD,EAAoEA,cAApE,CAAmF,MAAnF,EAA2FA,cAA3F,CAA0G,SAA1G,CAAd;AACA,YAAIgB,aAAaD,QAAQf,cAAR,CAAuB,YAAvB,CAAjB;AACA,YAAIiB,eAAeF,QAAQf,cAAR,CAAuB,cAAvB,CAAnB;;AAEA;AACA;AACAgB,mBAAWE,YAAX,CAAwBpC,GAAGqC,KAA3B,EAAkCC,MAAlC,GAA2CT,WAAWU,0BAAX,CAAsCP,KAAKQ,WAA3C,CAA3C;AACAL,qBAAaC,YAAb,CAA0BpC,GAAGqC,KAA7B,EAAoCC,MAApC,GAA6CT,WAAWU,0BAAX,CAAsCP,KAAKS,aAA3C,CAA7C;AACAR,gBAAQZ,MAAR,GAAiB,CAACc,aAAaO,CAAd,GAAkBP,aAAad,MAAhD;AACH,KA/DI;AAiELG,sBAjEK,gCAiEgB;AACjB,YAAIK,aAAaC,QAAQ,YAAR,CAAjB;AACA,YAAIa,gBAAgB,KAAK1B,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,eAAlD,CAApB;AACA,YAAIa,aAAaD,QAAQ,YAAR,CAAjB;AACA,YAAIE,OAAOD,WAAW,KAAK1B,MAAhB,CAAX;AACA,YAAIuC,UAAUZ,KAAKY,OAAnB;AACAZ,eAAOF,QAAQ,SAAR,EAAmBe,UAAnB,CAA8BC,KAA9B,CAAoC,KAAKzC,MAAzC,CAAP;AACA,YAAI2B,KAAKe,MAAL,IAAe,CAAnB,EAAsB;AAClB;AACA,gBAAIH,QAAQI,MAAR,IAAkB,CAAtB,EAAyB;AACrB,oBAAIC,eAAejD,GAAGkD,WAAH,CAAe,KAAKzC,oBAApB,CAAnB;AACA,oBAAI0C,cAAcF,aAAa/B,cAAb,CAA4B,OAA5B,CAAlB;AACAiC,4BAAYf,YAAZ,CAAyBpC,GAAGqC,KAA5B,EAAmCC,MAAnC,GAA4CT,WAAWU,0BAAX,CAAsC,GAAtC,CAA5C;AACA,oBAAIa,WAAWH,aAAa/B,cAAb,CAA4B,IAA5B,CAAf;AACA+B,6BAAa9B,KAAb,GAAqBiC,SAASjC,KAA9B;AACA8B,6BAAa5B,MAAb,GAAsB+B,SAAS/B,MAA/B;AACAsB,8BAActB,MAAd,IAAwB4B,aAAa5B,MAArC;AACA,oBAAIgC,OAAO,IAAX;AACAJ,6BAAa3B,EAAb,CAAgB,OAAhB,EAAwB,YAAU;AAC9B,wBAAIgC,eAAe,SAAfA,YAAe,GAAW;AAC1BD,6BAAK1B,KAAL;AACH,qBAFD;AAGA0B,yBAAK7C,iBAAL,CAAuB+C,gBAAvB,CAAwCF,KAAKhD,MAA7C,EAAqD,CAAC,CAAtD,EAAyDiD,YAAzD,EAAsED,KAAK/C,sBAA3E;AACH,iBALD;AAMA2C,6BAAaP,CAAb,GAAiB,EAAEC,cAActB,MAAd,GAAuB4B,aAAa5B,MAAtC,CAAjB;AACAsB,8BAAca,QAAd,CAAuBP,YAAvB;AACA;AACH;;AAED,iBAAK,IAAIQ,KAAT,IAAkBb,OAAlB,EAA2B;AACvB,oBAAIc,YAAYd,QAAQa,KAAR,CAAhB;AACA,oBAAIE,aAAa3D,GAAGkD,WAAH,CAAe,KAAKzC,oBAApB,CAAjB;AACA,oBAAImD,YAAYD,WAAWzC,cAAX,CAA0B,OAA1B,CAAhB;AACA;AACA0C,0BAAUxB,YAAV,CAAuBpC,GAAGqC,KAA1B,EAAiCC,MAAjC,GAA0CT,WAAWU,0BAAX,CAAsCmB,UAAUG,UAAhD,CAA1C;;AAEA,oBAAIC,SAASH,WAAWzC,cAAX,CAA0B,IAA1B,CAAb;AACA4C,uBAAOzC,MAAP,GAAgBuC,UAAUvC,MAA1B;;AAEAsC,2BAAWxC,KAAX,GAAmB2C,OAAO3C,KAA1B;AACAwC,2BAAWtC,MAAX,GAAoByC,OAAOzC,MAA3B;;AAEA,oBAAIoC,SAAS,CAAb,EAAgB;AACZd,kCAActB,MAAd,IAAwBsC,WAAWtC,MAAnC;AACH,iBAFD,MAGK;AACDsB,kCAActB,MAAd,IAAwBsC,WAAWtC,MAAX,GAAoB,KAAKT,gBAAjD;AACH;;AAED+C,2BAAWjB,CAAX,GAAe,EAAEC,cAActB,MAAd,GAAuBsC,WAAWtC,MAApC,CAAf;AACA,oBAAI0C,gBAAgBL,UAAUK,aAA9B;AACA,oBAAIC,gBAAgBN,UAAUM,aAA9B;AACA,oBAAIX,OAAO,IAAX;AACA,oBAAIY,eAAe,SAAfA,YAAe,CAASC,SAAT,EAAmBC,kBAAnB,EAAsCC,kBAAtC,EAAyDC,cAAzD,EAAyE;AACxFH,8BAAU5C,EAAV,CAAa,OAAb,EAAqB,YAAU;AAC3B;AACA,4BAAIgC,eAAe,SAAfA,YAAe,GAAW;AAC1B,gCAAIa,sBAAsB,CAA1B,EAA6B;AACzBd,qCAAK1B,KAAL;AACH,6BAFD,MAGK,IAAIwC,sBAAsB,CAA1B,EAA6B;AAC9B;AACArC,wCAAQ,YAAR,EAAsBwC,yBAAtB,CAAgDF,mBAAmB/D,MAAnE,EAA0E2B,KAAKuC,GAA/E,EAAoF,YAAU,CAAE,CAAhG,EAAiGH,mBAAmBI,KAApH;AACAnB,qCAAK1B,KAAL;AACH;AACJ,yBATD;AAUA0B,6BAAK7C,iBAAL,CAAuB+C,gBAAvB,CAAwCF,KAAKhD,MAA7C,EAAoDgE,cAApD,EAAmEf,YAAnE,EAAgFD,KAAK/C,sBAArF;AACH,qBAbD;AAcH,iBAfD;AAgBA2D,6BAAaN,UAAb,EAAyBI,aAAzB,EAAwCC,aAAxC,EAAuDP,KAAvD;AACAd,8BAAca,QAAd,CAAuBG,UAAvB;AACH;AACJ,SAjED,MAmEK,IAAI3B,KAAKe,MAAL,IAAe,CAAnB,EAAsB;AACvB;AACA,gBAAIf,KAAKyC,mBAAL,IAA4B,CAAC,CAAjC,EAAoC;AAChC,oBAAIA,sBAAsBzC,KAAKyC,mBAA/B;AACA,oBAAIC,iBAAiB9B,QAAQ6B,mBAAR,CAArB;;AAEA,oBAAId,aAAa3D,GAAGkD,WAAH,CAAe,KAAKzC,oBAApB,CAAjB;AACA,oBAAImD,YAAYD,WAAWzC,cAAX,CAA0B,OAA1B,CAAhB;AACA;AACA0C,0BAAUxB,YAAV,CAAuBpC,GAAGqC,KAA1B,EAAiCC,MAAjC,GAA0CT,WAAWU,0BAAX,CAAsCmC,eAAeb,UAArD,CAA1C;;AAEAD,0BAAUe,KAAV,GAAkB3E,GAAG2E,KAAH,CAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,CAAlB;AACA,oBAAIb,SAASH,WAAWzC,cAAX,CAA0B,WAA1B,CAAb;AACA4C,uBAAOc,MAAP,GAAgB,IAAhB;AACAd,uBAAOzC,MAAP,GAAgBuC,UAAUvC,MAA1B;;AAEAsC,2BAAWxC,KAAX,GAAmB2C,OAAO3C,KAA1B;AACAwC,2BAAWtC,MAAX,GAAoByC,OAAOzC,MAA3B;AACAsB,8BAActB,MAAd,IAAwBsC,WAAWtC,MAAnC;AACAsC,2BAAWvB,YAAX,CAAwBpC,GAAG6E,MAA3B,EAAmCC,YAAnC,GAAkD,KAAlD;AACAnB,2BAAWjB,CAAX,GAAe,EAAEC,cAActB,MAAd,GAAuBsC,WAAWtC,MAApC,CAAf;AACAsB,8BAAca,QAAd,CAAuBG,UAAvB;;AAEA,oBAAIV,eAAejD,GAAGkD,WAAH,CAAe,KAAKzC,oBAApB,CAAnB;AACA,oBAAI0C,cAAcF,aAAa/B,cAAb,CAA4B,OAA5B,CAAlB;AACAiC,4BAAYf,YAAZ,CAAyBpC,GAAGqC,KAA5B,EAAmCC,MAAnC,GAA4CT,WAAWU,0BAAX,CAAsC,GAAtC,CAA5C;AACA,oBAAIa,WAAWH,aAAa/B,cAAb,CAA4B,IAA5B,CAAf;AACA+B,6BAAa9B,KAAb,GAAqBiC,SAASjC,KAA9B;AACA8B,6BAAa5B,MAAb,GAAsB+B,SAAS/B,MAA/B;AACAsB,8BAActB,MAAd,IAAwB4B,aAAa5B,MAAb,GAAsB,KAAKT,gBAAnD;AACA,oBAAIyC,OAAO,IAAX;AACAJ,6BAAa3B,EAAb,CAAgB,OAAhB,EAAwB,YAAU;AAC9B+B,yBAAK1B,KAAL;AACH,iBAFD;AAGAsB,6BAAaP,CAAb,GAAiB,EAAEC,cAActB,MAAd,GAAuB4B,aAAa5B,MAAtC,CAAjB;AACAsB,8BAAca,QAAd,CAAuBP,YAAvB;AACH,aAlCD,MAoCK;AACD,oBAAIA,eAAejD,GAAGkD,WAAH,CAAe,KAAKzC,oBAApB,CAAnB;AACA,oBAAI0C,cAAcF,aAAa/B,cAAb,CAA4B,OAA5B,CAAlB;AACAiC,4BAAYf,YAAZ,CAAyBpC,GAAGqC,KAA5B,EAAmCC,MAAnC,GAA4CT,WAAWU,0BAAX,CAAsC,GAAtC,CAA5C;AACA,oBAAIa,WAAWH,aAAa/B,cAAb,CAA4B,IAA5B,CAAf;AACA+B,6BAAa9B,KAAb,GAAqBiC,SAASjC,KAA9B;AACA8B,6BAAa5B,MAAb,GAAsB+B,SAAS/B,MAA/B;AACAsB,8BAActB,MAAd,IAAwB4B,aAAa5B,MAArC;AACA,oBAAIgC,OAAO,IAAX;AACAJ,6BAAa3B,EAAb,CAAgB,OAAhB,EAAwB,YAAU;AAC9B+B,yBAAK1B,KAAL;AACH,iBAFD;AAGAsB,6BAAaP,CAAb,GAAiB,EAAEC,cAActB,MAAd,GAAuB4B,aAAa5B,MAAtC,CAAjB;AACAsB,8BAAca,QAAd,CAAuBP,YAAvB;AACH;AACJ;AAEJ,KAlMI;AAoMLxB,aApMK,uBAoMO;AACR,YAAIsD,OAAO,KAAK9D,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,MAAlD,CAAX;AACA,YAAI8D,iBAAiB,KAAK/D,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,gBAAlD,CAArB;AACA,YAAIyB,gBAAgB,KAAK1B,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCA,cAAnC,CAAkD,eAAlD,CAApB;;AAEA6D,aAAK1D,MAAL,GAAc,KAAKR,YAAL,GAAoBmE,eAAe3D,MAAnC,GAA4C,KAAKV,4BAAjD,GAAgFgC,cAActB,MAA9F,GAAuG,KAAKP,YAA1H;AACAkE,uBAAetC,CAAf,GAAmBqC,KAAK1D,MAAL,GAAY,CAAZ,GAAgB,KAAKR,YAAxC;AACA8B,sBAAcD,CAAd,GAAkBsC,eAAetC,CAAf,GAAmBsC,eAAe3D,MAAlC,GAA2C,KAAKV,4BAAlE;AACH;AACD;;AA7MK,CAAT","file":"mailSysMailMgr.js","sourceRoot":"../../../../../../assets/scripts/systems/mailSys","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        mailId: null,\n        relatedMailSectionNode: cc.Node,\n        relatedMailSysMgr: null,\n        mailOptionNodePrefab: cc.Prefab,\n        disOfContentAndOptionSection: 200,\n        disOfOptionNodes: 25,\n        headerHeight: 82,\n        footerHeight: 80\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var bg = this.node.getChildByName(\"bg\")\n        bg.width = cc.winSize.width\n        bg.height = cc.winSize.height\n        bg.on(\"touchstart\",function(){})\n\n        this.setupContentSection()\n        this.setupOptionSection()\n        this.setupUiBg()\n    },\n\n    start () {\n\n    },\n\n    close() {\n        this.node.destroy()\n    },\n\n    setupContentSection() {\n        var textConfig = require(\"textConfig\")\n        var mailConfig = require(\"mailConfig\")\n        var mail = mailConfig[this.mailId]\n        var content = this.node.getChildByName(\"others\").getChildByName(\"contentSection\").getChildByName(\"view\").getChildByName(\"content\")\n        var titleLabel = content.getChildByName(\"titleLabel\")\n        var contentLabel = content.getChildByName(\"contentLabel\")\n\n        // titleLabel.getComponent(cc.Label).string = mail.title\n        // contentLabel.getComponent(cc.Label).string = mail.content\n        titleLabel.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(mail.titleTextId)\n        contentLabel.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(mail.contentTextId)\n        content.height = -contentLabel.y + contentLabel.height\n    },\n\n    setupOptionSection() {\n        var textConfig = require(\"textConfig\")\n        var optionSection = this.node.getChildByName(\"others\").getChildByName(\"optionSection\")\n        var mailConfig = require(\"mailConfig\")\n        var mail = mailConfig[this.mailId]\n        var options = mail.options\n        mail = require(\"dataMgr\").playerData.mails[this.mailId]\n        if (mail.status == 0) {\n            //unreaded mail\n            if (options.length == 0) {\n                var okOptionNode = cc.instantiate(this.mailOptionNodePrefab)\n                var okLabelNode = okOptionNode.getChildByName(\"label\")\n                okLabelNode.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(147)\n                var okBgNode = okOptionNode.getChildByName(\"bg\")\n                okOptionNode.width = okBgNode.width\n                okOptionNode.height = okBgNode.height\n                optionSection.height += okOptionNode.height\n                var self = this\n                okOptionNode.on(\"click\",function(){\n                    var onMailReaded = function() {\n                        self.close()\n                    }\n                    self.relatedMailSysMgr.setOneMailReaded(self.mailId, -1, onMailReaded,self.relatedMailSectionNode)\n                })\n                okOptionNode.y = -(optionSection.height - okOptionNode.height)\n                optionSection.addChild(okOptionNode)\n                return\n            }\n\n            for (var index in options) {\n                var oneOption = options[index]\n                var optionNode = cc.instantiate(this.mailOptionNodePrefab)\n                var labelNode = optionNode.getChildByName(\"label\")\n                // labelNode.getComponent(cc.Label).string = oneOption.showText\n                labelNode.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(oneOption.showTextId)\n                \n                var bgNode = optionNode.getChildByName(\"bg\")\n                bgNode.height = labelNode.height\n\n                optionNode.width = bgNode.width\n                optionNode.height = bgNode.height\n\n                if (index == 0) {\n                    optionSection.height += optionNode.height\n                }\n                else {\n                    optionSection.height += optionNode.height + this.disOfOptionNodes\n                }\n\n                optionNode.y = -(optionSection.height - optionNode.height)\n                var operationType = oneOption.operationType\n                var operationPara = oneOption.operationPara\n                var self = this\n                var bindFunction = function(givenNode,givenOperationType,givenOperationPara,indexOfOptions) {\n                    givenNode.on(\"click\",function(){\n                        //no matter what option be selected, this mail will be readed\n                        var onMailReaded = function() {\n                            if (givenOperationType == 1) {\n                                self.close()\n                            }\n                            else if (givenOperationType == 2) {\n                                // mailSys.sendOneMail(givenOperationPara.mailId, mail.tag, givenOperationPara.delay)\n                                require(\"systemsMgr\").mailSysGloableSendOneMail(givenOperationPara.mailId,mail.tag, function(){},givenOperationPara.delay)\n                                self.close()\n                            }\n                        }\n                        self.relatedMailSysMgr.setOneMailReaded(self.mailId,indexOfOptions,onMailReaded,self.relatedMailSectionNode)\n                    })\n                }\n                bindFunction(optionNode, operationType, operationPara, index)\n                optionSection.addChild(optionNode)\n            }\n        }\n\n        else if (mail.status == 1) {\n            //readed mail\n            if (mail.selectedOptionIndex != -1) {\n                var selectedOptionIndex = mail.selectedOptionIndex\n                var selectedOption = options[selectedOptionIndex]\n\n                var optionNode = cc.instantiate(this.mailOptionNodePrefab)\n                var labelNode = optionNode.getChildByName(\"label\")\n                // labelNode.getComponent(cc.Label).string = selectedOption.showText\n                labelNode.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(selectedOption.showTextId)\n                \n                labelNode.color = cc.color(255,255,255)\n                var bgNode = optionNode.getChildByName(\"bg_readed\")\n                bgNode.active = true\n                bgNode.height = labelNode.height\n\n                optionNode.width = bgNode.width\n                optionNode.height = bgNode.height\n                optionSection.height += optionNode.height\n                optionNode.getComponent(cc.Button).interactable = false\n                optionNode.y = -(optionSection.height - optionNode.height)\n                optionSection.addChild(optionNode)\n\n                var okOptionNode = cc.instantiate(this.mailOptionNodePrefab)\n                var okLabelNode = okOptionNode.getChildByName(\"label\")\n                okLabelNode.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(147)\n                var okBgNode = okOptionNode.getChildByName(\"bg\")\n                okOptionNode.width = okBgNode.width\n                okOptionNode.height = okBgNode.height\n                optionSection.height += okOptionNode.height + this.disOfOptionNodes\n                var self = this\n                okOptionNode.on(\"click\",function(){\n                    self.close()\n                })\n                okOptionNode.y = -(optionSection.height - okOptionNode.height)\n                optionSection.addChild(okOptionNode)\n            }\n\n            else {\n                var okOptionNode = cc.instantiate(this.mailOptionNodePrefab)\n                var okLabelNode = okOptionNode.getChildByName(\"label\")\n                okLabelNode.getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(147)\n                var okBgNode = okOptionNode.getChildByName(\"bg\")\n                okOptionNode.width = okBgNode.width\n                okOptionNode.height = okBgNode.height\n                optionSection.height += okOptionNode.height\n                var self = this\n                okOptionNode.on(\"click\",function(){\n                    self.close()\n                })\n                okOptionNode.y = -(optionSection.height - okOptionNode.height)\n                optionSection.addChild(okOptionNode)\n            }\n        }\n        \n    },\n\n    setupUiBg() {\n        var uibg = this.node.getChildByName(\"others\").getChildByName(\"uibg\")\n        var contentSection = this.node.getChildByName(\"others\").getChildByName(\"contentSection\")\n        var optionSection = this.node.getChildByName(\"others\").getChildByName(\"optionSection\")\n\n        uibg.height = this.headerHeight + contentSection.height + this.disOfContentAndOptionSection + optionSection.height + this.footerHeight\n        contentSection.y = uibg.height/2 - this.headerHeight\n        optionSection.y = contentSection.y - contentSection.height - this.disOfContentAndOptionSection\n    }\n    // update (dt) {},\n});\n"]}