{"version":3,"sources":["assets/scripts/systems/welfarySys/welfarySysMgr.js"],"names":["cc","Class","Component","properties","desLabelNode","Node","ensureButtonNode","cancelButtonNode","systemName","start","setupInitUI","onClickEnsureButton","advMgr","require","delegate","showVideoAd","onClickCancelButton","closeSystem","flag","playerData","initAdWatchedFlag","getComponent","Label","string","getTextByIdAndLanguageType","getChildByName","onVideoAdEnd","commitBody","self","successCallBack","currentScene","director","getScene","name","active","str","pushNoti","commitPlayerDataToServer"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,YAAY,EAAEJ,EAAE,CAACK,IAhBT;AAiBRC,IAAAA,gBAAgB,EAAEN,EAAE,CAACK,IAjBb;AAkBRE,IAAAA,gBAAgB,EAAEP,EAAE,CAACK,IAlBb;AAmBRG,IAAAA,UAAU,EAAE;AAnBJ,GAHP;AAyBL;AAEA;AAEAC,EAAAA,KA7BK,mBA6BI;AACL,SAAKC,WAAL;AACH,GA/BI;AAiCLC,EAAAA,mBAjCK,iCAiCiB;AAClB,QAAIC,MAAM,GAAGC,OAAO,CAAC,aAAD,CAApB;;AACAD,IAAAA,MAAM,CAACE,QAAP,GAAkB,IAAlB;AACAF,IAAAA,MAAM,CAACG,WAAP;AACH,GArCI;AAuCLC,EAAAA,mBAvCK,iCAuCiB;AAClBH,IAAAA,OAAO,CAAC,YAAD,CAAP,CAAsBI,WAAtB,CAAkC,KAAKT,UAAvC;AACH,GAzCI;AA2CLE,EAAAA,WA3CK,yBA2CS;AACV,QAAIQ,IAAI,GAAGL,OAAO,CAAC,SAAD,CAAP,CAAmBM,UAAnB,CAA8BC,iBAAzC;;AACA,QAAIF,IAAI,IAAI,CAAZ,EAAe;AACX,WAAKd,YAAL,CAAkBiB,YAAlB,CAA+BrB,EAAE,CAACsB,KAAlC,EAAyCC,MAAzC,GAAkDV,OAAO,CAAC,YAAD,CAAP,CAAsBW,0BAAtB,CAAiD,GAAjD,CAAlD;AACA,WAAKlB,gBAAL,CAAsBmB,cAAtB,CAAqC,WAArC,EAAkDJ,YAAlD,CAA+DrB,EAAE,CAACsB,KAAlE,EAAyEC,MAAzE,GAAkFV,OAAO,CAAC,YAAD,CAAP,CAAsBW,0BAAtB,CAAiD,GAAjD,CAAlF;AACA,WAAKjB,gBAAL,CAAsBkB,cAAtB,CAAqC,WAArC,EAAkDJ,YAAlD,CAA+DrB,EAAE,CAACsB,KAAlE,EAAyEC,MAAzE,GAAkFV,OAAO,CAAC,YAAD,CAAP,CAAsBW,0BAAtB,CAAiD,GAAjD,CAAlF;AACH,KAJD,MAKK,IAAIN,IAAI,IAAI,CAAZ,EAAe;AAChB,WAAKd,YAAL,CAAkBiB,YAAlB,CAA+BrB,EAAE,CAACsB,KAAlC,EAAyCC,MAAzC,GAAkD,0BAAlD;AACH;AACJ,GArDI;AAuDL;AACAG,EAAAA,YAxDK,0BAwDU;AACX,QAAIC,UAAU,GAAG;AACbP,MAAAA,iBAAiB,EAAE;AADN,KAAjB;AAGA,QAAIQ,IAAI,GAAG,IAAX;;AACA,QAAIC,eAAe,GAAG,SAAlBA,eAAkB,GAAW;AAC7BhB,MAAAA,OAAO,CAAC,SAAD,CAAP,CAAmBM,UAAnB,CAA8BC,iBAA9B,GAAkD,CAAlD;;AACAP,MAAAA,OAAO,CAAC,YAAD,CAAP,CAAsBI,WAAtB,CAAkCW,IAAI,CAACpB,UAAvC;;AACA,UAAIsB,YAAY,GAAG9B,EAAE,CAAC+B,QAAH,CAAYC,QAAZ,EAAnB;;AACA,UAAIF,YAAY,CAACG,IAAb,IAAqB,WAAzB,EAAsC;AAClCH,QAAAA,YAAY,CAACL,cAAb,CAA4B,QAA5B,EAAsCA,cAAtC,CAAqD,cAArD,EAAqEA,cAArE,CAAoF,eAApF,EAAqGS,MAArG,GAA8G,KAA9G;AACH;;AACD,UAAIC,GAAG,GAAGtB,OAAO,CAAC,YAAD,CAAP,CAAsBW,0BAAtB,CAAiD,GAAjD,CAAV;;AACAX,MAAAA,OAAO,CAAC,iBAAD,CAAP,CAA2BuB,QAA3B,CAAoCD,GAApC;AACH,KATD;;AAUAtB,IAAAA,OAAO,CAAC,SAAD,CAAP,CAAmBwB,wBAAnB,CAA4CV,UAA5C,EAAuDE,eAAvD;AACH,GAxEI,CAyEL;;AAzEK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        desLabelNode: cc.Node,\n        ensureButtonNode: cc.Node,\n        cancelButtonNode: cc.Node,\n        systemName: \"welfarySys\"\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.setupInitUI()\n    },\n\n    onClickEnsureButton() {\n        var advMgr = require(\"advertisMgr\")\n        advMgr.delegate = this\n        advMgr.showVideoAd()\n    },\n\n    onClickCancelButton() {\n        require(\"systemsMgr\").closeSystem(this.systemName)\n    },\n    \n    setupInitUI() {\n        var flag = require(\"dataMgr\").playerData.initAdWatchedFlag\n        if (flag == 0) {\n            this.desLabelNode.getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(112)\n            this.ensureButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(113)\n            this.cancelButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(114)\n        }\n        else if (flag == 1) {\n            this.desLabelNode.getComponent(cc.Label).string = \"嗯？ 这个界面不应该出现的，你已经领取过福利啦~\"\n        }\n    },\n\n    //advertis delegate\n    onVideoAdEnd() {\n        var commitBody = {\n            initAdWatchedFlag: 1\n        }\n        var self = this\n        var successCallBack = function() {\n            require(\"dataMgr\").playerData.initAdWatchedFlag = 1\n            require(\"systemsMgr\").closeSystem(self.systemName)\n            var currentScene = cc.director.getScene()\n            if (currentScene.name == \"mainScene\") {\n                currentScene.getChildByName(\"Canvas\").getChildByName(\"enterButtons\").getChildByName(\"welfaryButton\").active = false\n            }\n            var str = require(\"textConfig\").getTextByIdAndLanguageType(165)\n            require(\"notificationMgr\").pushNoti(str)\n        }\n        require(\"dataMgr\").commitPlayerDataToServer(commitBody,successCallBack)\n    },\n    // update (dt) {},\n});\n"]}