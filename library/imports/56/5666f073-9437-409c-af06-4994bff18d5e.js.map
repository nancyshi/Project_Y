{"version":3,"sources":["assets/scripts/systems/addPropertyNumSys/addPropertyNumSysMgr.js"],"names":["cc","Class","Component","properties","ensureButtonNode","Node","cancelButtonNode","desLabelNode","addTypeId","addConfig","sysName","start","setupData","setupUI","config","require","textConfig","desStr","getTextByIdAndLanguageType","isFirstKey","key","toString","getComponent","Label","string","getChildByName","onWillOpend","givenAddTypeId","onClickEnsureButton","advertisMgr","delegate","showVideoAd","onClickCancelButton","closeSystem","onVideoAdEnd","commitBody","oneAddedPropertyNum","playerData","Object","keys","length","successCallBack","k","str","pushNoti","commitPlayerDataToServer"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        ensureButtonNode: cc.Node,\n        cancelButtonNode: cc.Node,\n        desLabelNode: cc.Node,\n        addTypeId: 1 ,\n        addConfig: null,\n        sysName: \"addPropertyNumSys\"\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.setupData()\n        this.setupUI()\n    },\n\n    setupData() {\n        var config = require(\"addPropertySysConfig\")\n        config = config[this.addTypeId]\n        this.addConfig = config\n    },\n\n    setupUI() {\n        var textConfig = require(\"textConfig\")\n        var desStr = textConfig.getTextByIdAndLanguageType(123)\n        var isFirstKey = true\n        for (var key in this.addConfig) {\n            if (isFirstKey == false) {\n                desStr += \"ï¼Œ\"\n            }\n            switch (key) {\n                case \"physicalPower\":\n                    desStr += textConfig.getTextByIdAndLanguageType(124) + this.addConfig[key].toString()\n                    break\n                case \"heart\":\n                    desStr += textConfig.getTextByIdAndLanguageType(125) + this.addConfig[key].toString()\n                    break\n            }\n            isFirstKey = false\n        }\n        desStr += textConfig.getTextByIdAndLanguageType(126)\n        this.desLabelNode.getComponent(cc.Label).string = desStr\n        this.ensureButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(113)\n        this.cancelButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(114)\n    },\n\n    onWillOpend(givenAddTypeId) {\n        this.addTypeId = givenAddTypeId\n    },\n\n    onClickEnsureButton(){\n        var advertisMgr = require(\"advertisMgr\")\n        advertisMgr.delegate = this\n        advertisMgr.showVideoAd()\n    },\n\n    onClickCancelButton() {\n        require(\"systemsMgr\").closeSystem(this.sysName)\n    },\n\n\n    //advertis delegate\n    onVideoAdEnd() {\n        var commitBody = {}\n        for (var key in this.addConfig) {\n            var oneAddedPropertyNum = require(\"dataMgr\").playerData[key] + this.addConfig[key]\n            commitBody[key] = oneAddedPropertyNum\n        }\n\n        if (Object.keys(commitBody).length > 0) {\n            var successCallBack = function() {\n                for (var k in commitBody) {\n                    require(\"dataMgr\").playerData[k] = commitBody[k]\n                }\n                var str = require(\"textConfig\").getTextByIdAndLanguageType(163)\n                require(\"notificationMgr\").pushNoti(str)\n            }\n\n            require(\"dataMgr\").commitPlayerDataToServer(commitBody,successCallBack)\n            require(\"systemsMgr\").closeSystem(this.sysName,2)\n        }\n    }\n    // update (dt) {},\n});\n"]}