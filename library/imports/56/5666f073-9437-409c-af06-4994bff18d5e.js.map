{"version":3,"sources":["../../../../../../assets/scripts/systems/addPropertyNumSys/assets/scripts/systems/addPropertyNumSys/addPropertyNumSysMgr.js"],"names":["cc","Class","extends","Component","properties","ensureButtonNode","Node","cancelButtonNode","desLabelNode","addTypeId","addConfig","sysName","start","setupData","setupUI","config","require","textConfig","desStr","getTextByIdAndLanguageType","isFirstKey","key","toString","getComponent","Label","string","getChildByName","onWillOpend","givenAddTypeId","onClickEnsureButton","advertisMgr","delegate","showVideoAd","onClickCancelButton","closeSystem","onVideoAdEnd","commitBody","oneAddedPropertyNum","playerData","Object","keys","length","successCallBack","k","commitPlayerDataToServer"],"mappings":"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","file":"addPropertyNumSysMgr.js","sourceRoot":"../../../../../../assets/scripts/systems/addPropertyNumSys","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        ensureButtonNode: cc.Node,\n        cancelButtonNode: cc.Node,\n        desLabelNode: cc.Node,\n        addTypeId: 1 ,\n        addConfig: null,\n        sysName: \"addPropertyNumSys\"\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.setupData()\n        this.setupUI()\n    },\n\n    setupData() {\n        var config = require(\"addPropertySysConfig\")\n        config = config[this.addTypeId]\n        this.addConfig = config\n    },\n\n    setupUI() {\n        var textConfig = require(\"textConfig\")\n        var desStr = textConfig.getTextByIdAndLanguageType(123)\n        var isFirstKey = true\n        for (var key in this.addConfig) {\n            if (isFirstKey == false) {\n                desStr += \"ï¼Œ\"\n            }\n            switch (key) {\n                case \"physicalPower\":\n                    desStr += textConfig.getTextByIdAndLanguageType(124) + this.addConfig[key].toString()\n                    break\n                case \"heart\":\n                    desStr += textConfig.getTextByIdAndLanguageType(125) + this.addConfig[key].toString()\n                    break\n            }\n            isFirstKey = false\n        }\n        desStr += textConfig.getTextByIdAndLanguageType(126)\n        this.desLabelNode.getComponent(cc.Label).string = desStr\n        this.ensureButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(113)\n        this.cancelButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(114)\n    },\n\n    onWillOpend(givenAddTypeId) {\n        this.addTypeId = givenAddTypeId\n    },\n\n    onClickEnsureButton(){\n        var advertisMgr = require(\"advertisMgr\")\n        advertisMgr.delegate = this\n        advertisMgr.showVideoAd()\n    },\n\n    onClickCancelButton() {\n        require(\"systemsMgr\").closeSystem(this.sysName)\n    },\n\n\n    //advertis delegate\n    onVideoAdEnd() {\n        var commitBody = {}\n        for (var key in this.config) {\n            var oneAddedPropertyNum = require(\"dataMgr\").playerData[key] + this.config[key]\n            commitBody[key] = oneAddedPropertyNum\n        }\n\n        if (Object.keys(commitBody).length > 0) {\n            var successCallBack = function() {\n                for (var k in commitBody) {\n                    require(\"dataMgr\").playerData[k] = commitBody[k]\n                }\n            }\n\n            require(\"dataMgr\").commitPlayerDataToServer(commitBody,successCallBack)\n        }\n    }\n    // update (dt) {},\n});\n"]}