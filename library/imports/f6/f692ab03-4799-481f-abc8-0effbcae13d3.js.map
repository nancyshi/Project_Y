{"version":3,"sources":["../../../../../assets/scripts/libs/assets/scripts/libs/resMgr.js"],"names":["ResMgr","cc","Class","extends","Component","properties","reses","resNum","loadedResNum","start","loadReses","complet","resObj","ensureSysPrefab","addSysPrefab","notiSysPrefab","len","Object","keys","length","self","key","temp","path","loader","loadRes","err","res","console","log","sharedResMgr","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,SAASC,GAAGC,KAAH,CAAS;AAClBC,aAASF,GAAGG,SADM;;AAGlBC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,eAAO,IAhBC;AAiBRC,gBAAQ,IAjBA;AAkBRC,sBAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAhCQ,KAHM;;AAsClB;;AAEA;;AAEAC,SA1CkB,mBA0CT,CAER,CA5CiB;AA8ClBC,aA9CkB,uBA8CgB;AAAA,YAAxBC,OAAwB,uEAAd,YAAU,CAAE,CAAE;;AAC9B,YAAIC,SAAS;AACTC,6BAAiB,oBADR;AAETC,0BAAc,eAFL;AAGTC,2BAAe;AAHN,SAAb;;AAMA,YAAIC,MAAMC,OAAOC,IAAP,CAAYN,MAAZ,EAAoBO,MAA9B;AACA,aAAKZ,MAAL,GAAcS,GAAd;AACA,aAAKV,KAAL,GAAa,EAAb;AACA,YAAIc,OAAO,IAAX;AACA,aAAK,IAAIC,GAAT,IAAgBT,MAAhB,EAAwB;;AAEpB,gBAAIU,OAAO,SAAPA,IAAO,CAASD,GAAT,EAAc;AACrB,oBAAIE,OAAOX,OAAOS,GAAP,CAAX;AACApB,mBAAGuB,MAAH,CAAUC,OAAV,CAAkBF,IAAlB,EAAwB,UAASG,GAAT,EAAaC,GAAb,EAAiB;AACrC,wBAAIA,GAAJ,EAAS;AACLP,6BAAKd,KAAL,CAAWe,GAAX,IAAkBM,GAAlB;AACAP,6BAAKZ,YAAL,IAAqB,CAArB;AACA,4BAAIY,KAAKZ,YAAL,IAAqBY,KAAKb,MAA9B,EAAsC;AAClCI;AACH;AACJ,qBAND,MAOK;AACDiB,gCAAQC,GAAR,CAAY,sBAAsBR,GAAtB,GAA4B,IAA5B,GAAmCK,GAA/C;AACH;AACJ,iBAXD;AAYH,aAdD;AAeAJ,iBAAKD,GAAL;AACH;AACJ;AA5EiB;;AA8ElB;AA9ES,CAAb;;AAiFA,IAAIS,eAAe,IAAI9B,MAAJ,EAAnB;AACA+B,OAAOC,OAAP,GAAiBF,YAAjB","file":"resMgr.js","sourceRoot":"../../../../../assets/scripts/libs","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar ResMgr = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        reses: null,\n        resNum: null,\n        loadedResNum: 0\n        //{\n        //     get() {\n        //         if (this._loadedResNum == null) {\n        //             this._loadedResNum = 0\n        //         }\n        //         return this._loadedResNum\n        //     },\n        //     set(value) {\n        //         this._loadedResNum = value\n        //         if (value == this.resNum) {\n\n        //         }\n        //     }\n        // }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    loadReses(complet = function(){}) {\n        var resObj = {\n            ensureSysPrefab: \"prefabs/ensureNode\",\n            addSysPrefab: \"prefabs/addUI\",\n            notiSysPrefab: \"prefabs/notiNode\"\n        }\n\n        var len = Object.keys(resObj).length\n        this.resNum = len\n        this.reses = {}\n        var self = this\n        for (var key in resObj) {\n            \n            var temp = function(key) {\n                var path = resObj[key]\n                cc.loader.loadRes(path, function(err,res){\n                    if (res) {\n                        self.reses[key] = res\n                        self.loadedResNum += 1\n                        if (self.loadedResNum == self.resNum) {\n                            complet()\n                        }\n                    }\n                    else {\n                        console.log(\"LOAD RES ERRO OF \" + key + \" :\" + err)\n                    }\n                })\n            }\n            temp(key)\n        }\n    },\n\n    // update (dt) {},\n});\n\nvar sharedResMgr = new ResMgr()\nmodule.exports = sharedResMgr\n"]}