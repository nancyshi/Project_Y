{"version":3,"sources":["globalRedPointMgr.js"],"names":["GlobalRedPointMgr","cc","Class","extends","Component","properties","currentRedPointMgrs","setupRedPoints","getRedPointMgrs","index","oneRedPointMgr","setupRedPoint","currentScene","director","getScene","self","temp","givenRootNode","children","oneChildNode","getComponent","push","getChildByName","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,oBAAoBC,GAAGC,KAAH,CAAS;AAC7BC,aAASF,GAAGG,SADiB;;AAG7BC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,6BAAqB;AAhBb,KAHiB;;AAsB7BC,kBAtB6B,4BAsBZ;AACb,aAAKC,eAAL;AACA,aAAK,IAAIC,KAAT,IAAkB,KAAKH,mBAAvB,EAA4C;AACxC,gBAAII,iBAAiB,KAAKJ,mBAAL,CAAyBG,KAAzB,CAArB;AACA,gBAAI,OAAOC,eAAeC,aAAtB,KAAwC,UAA5C,EAAwD;AACpDD,+BAAeC,aAAf;AACH;AACJ;AACJ,KA9B4B;AAgC7BH,mBAhC6B,6BAgCX;AACd,aAAKF,mBAAL,GAA2B,EAA3B;AACA,YAAIM,eAAeX,GAAGY,QAAH,CAAYC,QAAZ,EAAnB;AACA,YAAIC,OAAO,IAAX;AACA,YAAIC,OAAO,SAAPA,IAAO,CAASC,aAAT,EAAwB;AAC/B,iBAAK,IAAIR,KAAT,IAAkBQ,cAAcC,QAAhC,EAA0C;AACtC,oBAAIC,eAAeF,cAAcC,QAAd,CAAuBT,KAAvB,CAAnB;AACA,oBAAIC,iBAAiBS,aAAaC,YAAb,CAA0B,aAA1B,CAArB;AACA,oBAAIV,kBAAkB,IAAtB,EAA4B;AACxBK,yBAAKT,mBAAL,CAAyBe,IAAzB,CAA8BX,cAA9B;AACH;AACDM,qBAAKG,YAAL;AACH;AACJ,SATD;;AAWAH,aAAKJ,aAAaU,cAAb,CAA4B,QAA5B,CAAL;AACH;AAhD4B,CAAT,CAAxB;;AAmDAC,OAAOC,OAAP,GAAiB,IAAIxB,iBAAJ,EAAjB","file":"globalRedPointMgr.js","sourceRoot":"../../../../../assets/scripts/singleInstanceSystems","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar GlobalRedPointMgr = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        currentRedPointMgrs: []\n    },\n\n    setupRedPoints() {\n        this.getRedPointMgrs()\n        for (var index in this.currentRedPointMgrs) {\n            var oneRedPointMgr = this.currentRedPointMgrs[index]\n            if (typeof oneRedPointMgr.setupRedPoint === \"function\") {\n                oneRedPointMgr.setupRedPoint()\n            }\n        }\n    },\n\n    getRedPointMgrs() {\n        this.currentRedPointMgrs = []\n        var currentScene = cc.director.getScene()\n        var self = this\n        var temp = function(givenRootNode) {\n            for (var index in givenRootNode.children) {\n                var oneChildNode = givenRootNode.children[index]\n                var oneRedPointMgr = oneChildNode.getComponent(\"redPointMgr\")\n                if (oneRedPointMgr != null) {\n                    self.currentRedPointMgrs.push(oneRedPointMgr)\n                }\n                temp(oneChildNode)\n            }\n        }\n\n        temp(currentScene.getChildByName(\"Canvas\"))\n    }\n});\n\nmodule.exports = new GlobalRedPointMgr()\n"]}