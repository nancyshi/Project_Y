{"version":3,"sources":["welfarySysMgr.js"],"names":["cc","Class","extends","Component","properties","desLabelNode","Node","ensureButtonNode","cancelButtonNode","systemName","start","setupInitUI","onClickEnsureButton","advMgr","require","delegate","showVideoAd","onClickCancelButton","closeSystem","flag","playerData","initAdWatchedFlag","getComponent","Label","string","getTextByIdAndLanguageType","getChildByName","onVideoAdEnd","commitBody","self","successCallBack","currentScene","director","getScene","name","active","commitPlayerDataToServer"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,sBAAcL,GAAGM,IAhBT;AAiBRC,0BAAkBP,GAAGM,IAjBb;AAkBRE,0BAAkBR,GAAGM,IAlBb;AAmBRG,oBAAY;AAnBJ,KAHP;;AAyBL;;AAEA;;AAEAC,SA7BK,mBA6BI;AACL,aAAKC,WAAL;AACH,KA/BI;AAiCLC,uBAjCK,iCAiCiB;AAClB,YAAIC,SAASC,QAAQ,aAAR,CAAb;AACAD,eAAOE,QAAP,GAAkB,IAAlB;AACAF,eAAOG,WAAP;AACH,KArCI;AAuCLC,uBAvCK,iCAuCiB;AAClBH,gBAAQ,YAAR,EAAsBI,WAAtB,CAAkC,KAAKT,UAAvC;AACH,KAzCI;AA2CLE,eA3CK,yBA2CS;AACV,YAAIQ,OAAOL,QAAQ,SAAR,EAAmBM,UAAnB,CAA8BC,iBAAzC;AACA,YAAIF,QAAQ,CAAZ,EAAe;AACX,iBAAKd,YAAL,CAAkBiB,YAAlB,CAA+BtB,GAAGuB,KAAlC,EAAyCC,MAAzC,GAAkDV,QAAQ,YAAR,EAAsBW,0BAAtB,CAAiD,GAAjD,CAAlD;AACA,iBAAKlB,gBAAL,CAAsBmB,cAAtB,CAAqC,WAArC,EAAkDJ,YAAlD,CAA+DtB,GAAGuB,KAAlE,EAAyEC,MAAzE,GAAkFV,QAAQ,YAAR,EAAsBW,0BAAtB,CAAiD,GAAjD,CAAlF;AACA,iBAAKjB,gBAAL,CAAsBkB,cAAtB,CAAqC,WAArC,EAAkDJ,YAAlD,CAA+DtB,GAAGuB,KAAlE,EAAyEC,MAAzE,GAAkFV,QAAQ,YAAR,EAAsBW,0BAAtB,CAAiD,GAAjD,CAAlF;AACH,SAJD,MAKK,IAAIN,QAAQ,CAAZ,EAAe;AAChB,iBAAKd,YAAL,CAAkBiB,YAAlB,CAA+BtB,GAAGuB,KAAlC,EAAyCC,MAAzC,GAAkD,0BAAlD;AACH;AACJ,KArDI;;;AAuDL;AACAG,gBAxDK,0BAwDU;AACX,YAAIC,aAAa;AACbP,+BAAmB;AADN,SAAjB;AAGA,YAAIQ,OAAO,IAAX;AACA,YAAIC,kBAAkB,SAAlBA,eAAkB,GAAW;AAC7BhB,oBAAQ,SAAR,EAAmBM,UAAnB,CAA8BC,iBAA9B,GAAkD,CAAlD;AACAP,oBAAQ,YAAR,EAAsBI,WAAtB,CAAkCW,KAAKpB,UAAvC;AACA,gBAAIsB,eAAe/B,GAAGgC,QAAH,CAAYC,QAAZ,EAAnB;AACA,gBAAIF,aAAaG,IAAb,IAAqB,WAAzB,EAAsC;AAClCH,6BAAaL,cAAb,CAA4B,QAA5B,EAAsCA,cAAtC,CAAqD,eAArD,EAAsES,MAAtE,GAA+E,KAA/E;AACH;AACJ,SAPD;AAQArB,gBAAQ,SAAR,EAAmBsB,wBAAnB,CAA4CR,UAA5C,EAAuDE,eAAvD;AACH;AAtEI;AAuEL;AAvEJ","file":"welfarySysMgr.js","sourceRoot":"../../../../../../assets/scripts/systems/welfarySys","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        desLabelNode: cc.Node,\n        ensureButtonNode: cc.Node,\n        cancelButtonNode: cc.Node,\n        systemName: \"welfarySys\"\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.setupInitUI()\n    },\n\n    onClickEnsureButton() {\n        var advMgr = require(\"advertisMgr\")\n        advMgr.delegate = this\n        advMgr.showVideoAd()\n    },\n\n    onClickCancelButton() {\n        require(\"systemsMgr\").closeSystem(this.systemName)\n    },\n    \n    setupInitUI() {\n        var flag = require(\"dataMgr\").playerData.initAdWatchedFlag\n        if (flag == 0) {\n            this.desLabelNode.getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(112)\n            this.ensureButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(113)\n            this.cancelButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(114)\n        }\n        else if (flag == 1) {\n            this.desLabelNode.getComponent(cc.Label).string = \"嗯？ 这个界面不应该出现的，你已经领取过福利啦~\"\n        }\n    },\n\n    //advertis delegate\n    onVideoAdEnd() {\n        var commitBody = {\n            initAdWatchedFlag: 1\n        }\n        var self = this\n        var successCallBack = function() {\n            require(\"dataMgr\").playerData.initAdWatchedFlag = 1\n            require(\"systemsMgr\").closeSystem(self.systemName)\n            var currentScene = cc.director.getScene()\n            if (currentScene.name == \"mainScene\") {\n                currentScene.getChildByName(\"Canvas\").getChildByName(\"welfaryButton\").active = false\n            }\n        }\n        require(\"dataMgr\").commitPlayerDataToServer(commitBody,successCallBack)\n    },\n    // update (dt) {},\n});\n"]}