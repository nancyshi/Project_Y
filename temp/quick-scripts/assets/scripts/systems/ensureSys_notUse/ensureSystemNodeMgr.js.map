{"version":3,"sources":["ensureSystemNodeMgr.js"],"names":["cc","Class","extends","Component","properties","desText","get","_desText","set","value","desLabel","node","getChildByName","getComponent","Label","string","onEnsureButtonClick","onCancleButtonClick","canClose","_canClose","closeButtonNode","active","cancelButtonText","_cancelButtonText","cancelButtonNode","ensureButtonText","_ensureButtonText","ensureButtonNode","ensureButtonWillAutoCloseUi","cancelButtonWillAutoCloseUi","isExsistCancelButton","_isExsistCancelButton","x","onLoad","bg","on","winSize","width","height","others","close","onEnsure","onCancel","start","self","tween","to","scale","call","destroy","show","target","addChild"],"mappings":"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","file":"ensureSystemNodeMgr.js","sourceRoot":"../../../../../assets/scripts/systems","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        desText: {\n            get() {\n                if (this._desText == null) {\n                    this.desText = \"default value\"\n                }\n                return this._desText\n            },\n            set(value) {\n                this._desText = value\n                \n                var desLabel = this.node.getChildByName(\"others\").getChildByName(\"desLabel\")\n                desLabel.getComponent(cc.Label).string = value\n                \n            }\n        },\n        onEnsureButtonClick: null,\n        onCancleButtonClick: null,\n        canClose: {\n            get() {\n                return this._canClose\n            },\n            set(value) {\n                this._canClose = value\n                var closeButtonNode = this.node.getChildByName(\"others\").getChildByName(\"closeButton\")\n                closeButtonNode.active = value\n            }\n\n        },\n\n        cancelButtonText: {\n            get() {\n                return this._cancelButtonText\n            },\n            set(value) {\n                this._cancelButtonText = value\n                var cancelButtonNode = this.node.getChildByName(\"others\").getChildByName(\"cancelButton\")\n                cancelButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = value\n            }\n        },\n\n        ensureButtonText: {\n            get() {\n                return this._ensureButtonText\n            },\n            set(value) {\n                this._ensureButtonText = value\n                var ensureButtonNode = this.node.getChildByName(\"others\").getChildByName(\"ensureButton\")\n                ensureButtonNode.getChildByName(\"textLabel\").getComponent(cc.Label).string = value\n            }\n        },\n\n        ensureButtonWillAutoCloseUi: true,\n        cancelButtonWillAutoCloseUi: true,\n        isExsistCancelButton: {\n            get() {\n                if(this._isExsistCancelButton == null) {\n                    this._isExsistCancelButton = true\n                }\n                return this._isExsistCancelButton\n            },\n            set(value) {\n                this._isExsistCancelButton = value\n                if (value == false) {\n                    this.node.getChildByName(\"others\").getChildByName(\"cancelButton\").active = false\n                    this.node.getChildByName(\"others\").getChildByName(\"ensureButton\").x = 0\n                }\n            }\n        },\n        \n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var bg = this.node.getChildByName(\"bg\")\n        bg.on(\"touchstart\",function(){},this)\n        var winSize = cc.winSize\n        bg.width = winSize.width\n        bg.height = winSize.height\n\n        var others = this.node.getChildByName(\"others\")\n        var closeButtonNode = others.getChildByName(\"closeButton\")\n        closeButtonNode.on(\"click\",this.close,this)\n        \n        var ensureButtonNode = others.getChildByName(\"ensureButton\")\n        ensureButtonNode.on(\"click\",this.onEnsure,this)\n        var cancelButtonNode = others.getChildByName(\"cancelButton\")\n        cancelButtonNode.on(\"click\",this.onCancel,this)\n    },\n\n    start () {\n\n    },\n    onEnsure() {\n        if (this.ensureButtonWillAutoCloseUi == true) {\n            this.close()\n        }\n        if (this.onEnsureButtonClick != null) {\n            this.onEnsureButtonClick()\n        }\n    },\n    onCancel(){\n        if (this.cancelButtonWillAutoCloseUi == true) {\n            this.close()\n        }\n        if (this.onCancleButtonClick != null) {\n            this.onCancleButtonClick()\n        }\n    },\n\n    close() {\n        var others = this.node.getChildByName(\"others\")\n        var self = this\n        cc.tween(others)\n            .to(0.3,{scale: 0})\n            .call(function(){\n                self.node.destroy()\n            })\n            .start()\n    },\n    show(target) {\n        var others = this.node.getChildByName(\"others\")\n        others.scale = 0\n        target.addChild(this.node)\n\n        cc.tween(others) \n            .to(0.3, {scale: 1})\n            .start()\n    },\n    // update (dt) {},\n});\n"]}