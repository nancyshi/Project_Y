
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/mainScene/preChallengeUIMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e5cd7mr4sZJ97Ekm5ipqXJu', 'preChallengeUIMgr');
// scripts/mainScene/preChallengeUIMgr.js

"use strict";

// Learn cc.Class:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html
//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html
//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html
cc.Class({
  "extends": cc.Component,
  properties: {
    // foo: {
    //     // ATTRIBUTES:
    //     default: null,        // The default value will be used only when the component attaching
    //                           // to a node for the first time
    //     type: cc.SpriteFrame, // optional, default is typeof default
    //     serializable: true,   // optional, default is true
    // },
    // bar: {
    //     get () {
    //         return this._bar;
    //     },
    //     set (value) {
    //         this._bar = value;
    //     }
    // },
    headerDis: 83,
    footerDis: 124,
    sectionDis: 66,
    contentSpace: 99,
    mailSectionElementDis: 30,
    titleLabelNode: cc.Node,
    challengeButtonNoe: cc.Node,
    contentSectionNode: cc.Node,
    mailSectionNode: cc.Node,
    closeButtonNode: cc.Node,
    mailSectionElementPrefab: cc.Prefab,
    challengeButtonCostPhySprite: cc.SpriteFrame,
    level: null,
    levelStatus: null,
    costResult: null,
    delegate: null
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    var textConfig = require("textConfig");

    var bg = this.node.getChildByName("bg");
    bg.width = cc.winSize.width;
    bg.height = cc.winSize.height;
    bg.on("touchstart", function () {}, this);
    var self = this;
    this.closeButtonNode.on("click", function () {
      if (self.delegate != null) {
        self.delegate.preChanllengeUIOpend = false;
      } else {
        cc.log("delegate is null");
      }

      self.node.destroy();
    }, this);
    this.challengeButtonNoe.getChildByName("New Label").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(151);
  },
  start: function start() {
    this.setupUI();
  },
  getSectionAndIndexOfLevel: function getSectionAndIndexOfLevel() {
    var mainSceneMgr = cc.director.getScene().getChildByName("Canvas").getComponent("mainSceneMgr");
    var section = mainSceneMgr.selectedSection;

    var sectionConfig = require("sectionConfig");

    var levels = sectionConfig[section].levels;
    var index = levels.indexOf(this.level) + 1;
    return [section, index];
  },
  setupUI: function setupUI() {
    this._setupUIContent();

    this._setupUIPosition();
  },
  _setupUIContent: function _setupUIContent() {
    //title label
    var result = this.getSectionAndIndexOfLevel();
    this.titleLabelNode.getComponent(cc.Label).string = result[0].toString() + " - " + result[1]; //content section

    var levelConfig = require("levelConfig");

    var config = levelConfig[this.level];
    var desLabelNode = this.contentSectionNode.getChildByName("desLabel");
    desLabelNode.getComponent(cc.Label).string = require("textConfig").getTextByIdAndLanguageType(config.desTextId);

    desLabelNode.getComponent(cc.Label)._forceUpdateRenderData();

    var seperateLineUpNode = this.contentSectionNode.getChildByName("seperateLineUp");
    var seperateLineDownNode = this.contentSectionNode.getChildByName("seperateLineDown");
    var contentHeight = desLabelNode.height + 2 * this.contentSpace + seperateLineUpNode.height + seperateLineDownNode.height;
    this.contentSectionNode.height = contentHeight;
    seperateLineUpNode.y = 0;
    desLabelNode.y = seperateLineUpNode.y - seperateLineUpNode.height - this.contentSpace;
    seperateLineDownNode.y = -contentHeight + seperateLineDownNode.height; //mailSection

    var textConfig = require("textConfig");

    var result = this._getMailSectionInfo();

    var mailSectionHeight = 0;

    for (var index in result) {
      var oneConfig = result[index];
      var node = cc.instantiate(this.mailSectionElementPrefab);
      var desLabel = node.getChildByName("desLabel");
      var textStr = "";

      if (oneConfig.type == 1) {
        // textStr = "通关后会收到 " + oneConfig.tag + " 分支的新邮件"
        textStr = textConfig.getFormatedString(149, [oneConfig.tag]);
      } else if (oneConfig.type == 2) {
        // textStr = "用不多于 " + oneConfig.minStep + " 步通关，会收到 " + oneConfig.tag + " 分支的新邮件"
        textStr = textConfig.getFormatedString(150, [oneConfig.minStep, oneConfig.tag]);
      }

      desLabel.getComponent(cc.Label).string = textStr;

      desLabel.getComponent(cc.Label)._forceUpdateRenderData();

      var completeIcon = node.getChildByName("completeIcon");

      if (oneConfig.status == true) {
        completeIcon.active = true;
      }

      if (desLabel.height > completeIcon.height) {
        node.height = desLabel.height;
      } else {
        node.height = completeIcon.height;
      }

      node.y = mailSectionHeight;
      mailSectionHeight += node.height;

      if (index != result.length - 1) {
        mailSectionHeight += this.mailSectionElementDis;
      }

      this.mailSectionNode.addChild(node);
    }

    this.mailSectionNode.height = mailSectionHeight; //challengeButton

    var costResult = this._getCostInfoOfChallenge();

    if (costResult.type == "physicalPower") {
      this.challengeButtonNoe.getChildByName("costIcon").getComponent(cc.Sprite).spriteFrame = this.challengeButtonCostPhySprite;
    }

    this.challengeButtonNoe.getChildByName("costLabel").getComponent(cc.Label).string = costResult.num.toString();
    this.costResult = costResult;
  },
  _setupUIPosition: function _setupUIPosition() {
    var totalHeight = this.footerDis + this.titleLabelNode.height + this.sectionDis + this.contentSectionNode.height + this.sectionDis + this.mailSectionNode.height + this.sectionDis + this.challengeButtonNoe.height + this.footerDis;
    var uibg = this.node.getChildByName("others").getChildByName("uiBg");
    uibg.height = totalHeight;
    this.titleLabelNode.y = uibg.height / 2 - this.headerDis;
    this.contentSectionNode.y = this.titleLabelNode.y - this.titleLabelNode.height - this.sectionDis;
    this.mailSectionNode.y = this.contentSectionNode.y - this.contentSectionNode.height - this.sectionDis;
    this.challengeButtonNoe.y = this.mailSectionNode.y - this.mailSectionNode.height - this.sectionDis - this.challengeButtonNoe.height / 2;
  },
  _getMailSectionInfo: function _getMailSectionInfo() {
    var mailSysConfig = require("mailSysConfig");

    var result = [];

    var textConfig = require("textConfig");

    for (var tag in mailSysConfig) {
      var oneConfig = mailSysConfig[tag];
      var conditions = oneConfig.conditions;

      var currentConditionIndex = require("dataMgr").playerData.mailConditionIndex[tag];

      for (var index in conditions) {
        var oneConditionConfig = conditions[index];
        var conditionType = oneConditionConfig.conditionType;
        var conditionPara = oneConditionConfig.conditionPara; // if (conditionPara == this.level) {
        //     var oneResult = {
        //         tag: oneConfig.tagName,
        //         status: null
        //     }
        // }

        var oneResult = null;

        if (conditionType == 1 && conditionPara == this.level || conditionType == 2 && conditionPara.levelId == this.level) {
          oneResult = {
            // tag: oneConfig.tagNameTextId,
            tag: textConfig.getTextByIdAndLanguageType(oneConfig.tagNameTextId),
            type: conditionType,
            status: null,
            minStep: null
          };
        }

        if (oneResult == null) {
          continue;
        }

        if (index < currentConditionIndex) {
          oneResult.status = true;
        } else {
          oneResult.status = false;
        }

        if (conditionType == 2) {
          oneResult.minStep = conditionPara.minStepNum;
        }

        result.push(oneResult);
        break;
      }
    }

    return result;
  },
  _getCostInfoOfChallenge: function _getCostInfoOfChallenge() {
    var result = {
      type: "physicalPower",
      num: 0
    };

    var levelConfig = require("levelConfig");

    if (this.levelStatus == 1) {
      result.type = "heart";
      result.num = levelConfig[this.level].heartForRetryCost;
    } else if (this.levelStatus == 2) {
      var flag = require("dataMgr").playerData.physicalPowerCostedFlag;

      if (flag == 0) {
        result.type = "physicalPower";
        result.num = levelConfig[this.level].physicalPowerCost;
      } else if (flag == 1) {
        result.type = "heart";
        result.num = levelConfig[this.level].heartForRetryCost;
      }
    }

    return result;
  },
  onClick: function onClick() {
    if (this.costResult == null || this.costResult.num == 0) {
      return;
    }

    var valueNum = null;

    if (this.costResult.type == "heart") {
      valueNum = require("dataMgr").playerData.heart - this.costResult.num;
    } else if (this.costResult.type == "physicalPower") {
      valueNum = require("dataMgr").playerData.physicalPower - this.costResult.num;
    }

    if (valueNum == null || valueNum < 0) {
      var notificaitionSys = require("notificationMgr");

      var notiStr = "";

      if (this.costResult.type == "heart") {
        notiStr = "金币不足";
      } else if (this.costResult.type == "physicalPower") {
        notiStr = "体力不足";
      }

      notificaitionSys.showNoti(notiStr);
      return;
    }

    var networkMgr = require("networkMgr");

    var messageObj = networkMgr.makeMessageObj("dataModule", "commitMessageTyp");
    messageObj.message.playerId = require("dataMgr").playerData.id;
    var commitBody = null;

    if (this.costResult.type == "heart") {
      commitBody = {
        "heart": require("dataMgr").playerData.heart - this.costResult.num
      };
    } else if (this.costResult.type == "physicalPower") {
      commitBody = {
        "physicalPower": require("dataMgr").playerData.physicalPower - this.costResult.num
      };
    }

    messageObj.message.commitBody = commitBody;
    var self = this;

    messageObj.successCallBack = function () {
      if (self.costResult.type == "heart") {
        require("dataMgr").playerData.heart = commitBody.heart;
      } else if (self.costResult.type == "physicalPower") {
        require("dataMgr").playerData.physicalPower = commitBody.physicalPower;
      } // self.challengeButtonNoe.getComponent(cc.Button).interactable = true


      require("gameMgr").enterLevelScene(self.level);
    };

    this.challengeButtonNoe.getComponent(cc.Button).interactable = false;
    networkMgr.sendMessageByMsgObj(messageObj);
  } // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL21haW5TY2VuZS9wcmVDaGFsbGVuZ2VVSU1nci5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImhlYWRlckRpcyIsImZvb3RlckRpcyIsInNlY3Rpb25EaXMiLCJjb250ZW50U3BhY2UiLCJtYWlsU2VjdGlvbkVsZW1lbnREaXMiLCJ0aXRsZUxhYmVsTm9kZSIsIk5vZGUiLCJjaGFsbGVuZ2VCdXR0b25Ob2UiLCJjb250ZW50U2VjdGlvbk5vZGUiLCJtYWlsU2VjdGlvbk5vZGUiLCJjbG9zZUJ1dHRvbk5vZGUiLCJtYWlsU2VjdGlvbkVsZW1lbnRQcmVmYWIiLCJQcmVmYWIiLCJjaGFsbGVuZ2VCdXR0b25Db3N0UGh5U3ByaXRlIiwiU3ByaXRlRnJhbWUiLCJsZXZlbCIsImxldmVsU3RhdHVzIiwiY29zdFJlc3VsdCIsImRlbGVnYXRlIiwib25Mb2FkIiwidGV4dENvbmZpZyIsInJlcXVpcmUiLCJiZyIsIm5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsIndpZHRoIiwid2luU2l6ZSIsImhlaWdodCIsIm9uIiwic2VsZiIsInByZUNoYW5sbGVuZ2VVSU9wZW5kIiwibG9nIiwiZGVzdHJveSIsImdldENvbXBvbmVudCIsIkxhYmVsIiwic3RyaW5nIiwiZ2V0VGV4dEJ5SWRBbmRMYW5ndWFnZVR5cGUiLCJzdGFydCIsInNldHVwVUkiLCJnZXRTZWN0aW9uQW5kSW5kZXhPZkxldmVsIiwibWFpblNjZW5lTWdyIiwiZGlyZWN0b3IiLCJnZXRTY2VuZSIsInNlY3Rpb24iLCJzZWxlY3RlZFNlY3Rpb24iLCJzZWN0aW9uQ29uZmlnIiwibGV2ZWxzIiwiaW5kZXgiLCJpbmRleE9mIiwiX3NldHVwVUlDb250ZW50IiwiX3NldHVwVUlQb3NpdGlvbiIsInJlc3VsdCIsInRvU3RyaW5nIiwibGV2ZWxDb25maWciLCJjb25maWciLCJkZXNMYWJlbE5vZGUiLCJkZXNUZXh0SWQiLCJfZm9yY2VVcGRhdGVSZW5kZXJEYXRhIiwic2VwZXJhdGVMaW5lVXBOb2RlIiwic2VwZXJhdGVMaW5lRG93bk5vZGUiLCJjb250ZW50SGVpZ2h0IiwieSIsIl9nZXRNYWlsU2VjdGlvbkluZm8iLCJtYWlsU2VjdGlvbkhlaWdodCIsIm9uZUNvbmZpZyIsImluc3RhbnRpYXRlIiwiZGVzTGFiZWwiLCJ0ZXh0U3RyIiwidHlwZSIsImdldEZvcm1hdGVkU3RyaW5nIiwidGFnIiwibWluU3RlcCIsImNvbXBsZXRlSWNvbiIsInN0YXR1cyIsImFjdGl2ZSIsImxlbmd0aCIsImFkZENoaWxkIiwiX2dldENvc3RJbmZvT2ZDaGFsbGVuZ2UiLCJTcHJpdGUiLCJzcHJpdGVGcmFtZSIsIm51bSIsInRvdGFsSGVpZ2h0IiwidWliZyIsIm1haWxTeXNDb25maWciLCJjb25kaXRpb25zIiwiY3VycmVudENvbmRpdGlvbkluZGV4IiwicGxheWVyRGF0YSIsIm1haWxDb25kaXRpb25JbmRleCIsIm9uZUNvbmRpdGlvbkNvbmZpZyIsImNvbmRpdGlvblR5cGUiLCJjb25kaXRpb25QYXJhIiwib25lUmVzdWx0IiwibGV2ZWxJZCIsInRhZ05hbWVUZXh0SWQiLCJtaW5TdGVwTnVtIiwicHVzaCIsImhlYXJ0Rm9yUmV0cnlDb3N0IiwiZmxhZyIsInBoeXNpY2FsUG93ZXJDb3N0ZWRGbGFnIiwicGh5c2ljYWxQb3dlckNvc3QiLCJvbkNsaWNrIiwidmFsdWVOdW0iLCJoZWFydCIsInBoeXNpY2FsUG93ZXIiLCJub3RpZmljYWl0aW9uU3lzIiwibm90aVN0ciIsInNob3dOb3RpIiwibmV0d29ya01nciIsIm1lc3NhZ2VPYmoiLCJtYWtlTWVzc2FnZU9iaiIsIm1lc3NhZ2UiLCJwbGF5ZXJJZCIsImlkIiwiY29tbWl0Qm9keSIsInN1Y2Nlc3NDYWxsQmFjayIsImVudGVyTGV2ZWxTY2VuZSIsIkJ1dHRvbiIsImludGVyYWN0YWJsZSIsInNlbmRNZXNzYWdlQnlNc2dPYmoiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNB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Q1UsVUFBVSxDQUFDVixhQUF6RDtBQUNILE9BTmtDLENBUW5DOzs7QUFDQWxGLE1BQUFBLE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUI4RixlQUFuQixDQUFtQ3RGLElBQUksQ0FBQ2QsS0FBeEM7QUFDSCxLQVZEOztBQVlBLFNBQUtSLGtCQUFMLENBQXdCMEIsWUFBeEIsQ0FBcUNyQyxFQUFFLENBQUN3SCxNQUF4QyxFQUFnREMsWUFBaEQsR0FBK0QsS0FBL0Q7QUFDQVYsSUFBQUEsVUFBVSxDQUFDVyxtQkFBWCxDQUErQlYsVUFBL0I7QUFDSCxHQTFTSSxDQTJTTDs7QUEzU0ssQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGVhcm4gY2MuQ2xhc3M6XG4vLyAgLSBbQ2hpbmVzZV0gaHR0cHM6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC96aC9zY3JpcHRpbmcvY2xhc3MuaHRtbFxuLy8gIC0gW0VuZ2xpc2hdIGh0dHA6Ly9kb2NzLmNvY29zMmQteC5vcmcvY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2NsYXNzLmh0bWxcbi8vIExlYXJuIEF0dHJpYnV0ZTpcbi8vICAtIFtDaGluZXNlXSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL3poL3NjcmlwdGluZy9yZWZlcmVuY2UvYXR0cmlidXRlcy5odG1sXG4vLyAgLSBbRW5nbGlzaF0gaHR0cDovL2RvY3MuY29jb3MyZC14Lm9yZy9jcmVhdG9yL21hbnVhbC9lbi9zY3JpcHRpbmcvcmVmZXJlbmNlL2F0dHJpYnV0ZXMuaHRtbFxuLy8gTGVhcm4gbGlmZS1jeWNsZSBjYWxsYmFja3M6XG4vLyAgLSBbQ2hpbmVzZV0gaHR0cHM6Ly9kb2NzLmNvY29zLmNvbS9jcmVhdG9yL21hbnVhbC96aC9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxuLy8gIC0gW0VuZ2xpc2hdIGh0dHBzOi8vd3d3LmNvY29zMmQteC5vcmcvZG9jcy9jcmVhdG9yL21hbnVhbC9lbi9zY3JpcHRpbmcvbGlmZS1jeWNsZS1jYWxsYmFja3MuaHRtbFxuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICAvLyBmb286IHtcbiAgICAgICAgLy8gICAgIC8vIEFUVFJJQlVURVM6XG4gICAgICAgIC8vICAgICBkZWZhdWx0OiBudWxsLCAgICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcbiAgICAgICAgLy8gICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxuICAgICAgICAvLyAgICAgc2VyaWFsaXphYmxlOiB0cnVlLCAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gYmFyOiB7XG4gICAgICAgIC8vICAgICBnZXQgKCkge1xuICAgICAgICAvLyAgICAgICAgIHJldHVybiB0aGlzLl9iYXI7XG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgc2V0ICh2YWx1ZSkge1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuX2JhciA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9LFxuICAgICAgICBoZWFkZXJEaXM6IDgzLFxuICAgICAgICBmb290ZXJEaXM6IDEyNCxcbiAgICAgICAgc2VjdGlvbkRpczogNjYsXG4gICAgICAgIGNvbnRlbnRTcGFjZTogOTksXG4gICAgICAgIG1haWxTZWN0aW9uRWxlbWVudERpczogMzAsXG5cbiAgICAgICAgdGl0bGVMYWJlbE5vZGU6IGNjLk5vZGUsXG4gICAgICAgIGNoYWxsZW5nZUJ1dHRvbk5vZTogY2MuTm9kZSxcbiAgICAgICAgY29udGVudFNlY3Rpb25Ob2RlOiBjYy5Ob2RlLFxuICAgICAgICBtYWlsU2VjdGlvbk5vZGU6IGNjLk5vZGUsXG4gICAgICAgIGNsb3NlQnV0dG9uTm9kZTogY2MuTm9kZSxcbiAgICAgICAgbWFpbFNlY3Rpb25FbGVtZW50UHJlZmFiOiBjYy5QcmVmYWIsXG4gICAgICAgIGNoYWxsZW5nZUJ1dHRvbkNvc3RQaHlTcHJpdGU6IGNjLlNwcml0ZUZyYW1lLFxuXG4gICAgICAgIGxldmVsOiBudWxsLFxuICAgICAgICBsZXZlbFN0YXR1czogbnVsbCxcbiAgICAgICAgY29zdFJlc3VsdDogbnVsbCxcbiAgICAgICAgZGVsZWdhdGU6IG51bGxcbiAgICB9LFxuXG4gICAgLy8gTElGRS1DWUNMRSBDQUxMQkFDS1M6XG5cbiAgICBvbkxvYWQgKCkge1xuICAgICAgICB2YXIgdGV4dENvbmZpZyA9IHJlcXVpcmUoXCJ0ZXh0Q29uZmlnXCIpXG4gICAgICAgIHZhciBiZyA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImJnXCIpXG4gICAgICAgIGJnLndpZHRoID0gY2Mud2luU2l6ZS53aWR0aFxuICAgICAgICBiZy5oZWlnaHQgPSBjYy53aW5TaXplLmhlaWdodFxuICAgICAgICBiZy5vbihcInRvdWNoc3RhcnRcIixmdW5jdGlvbigpe30sdGhpcylcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbk5vZGUub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoc2VsZi5kZWxlZ2F0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5kZWxlZ2F0ZS5wcmVDaGFubGxlbmdlVUlPcGVuZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJkZWxlZ2F0ZSBpcyBudWxsXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLm5vZGUuZGVzdHJveSgpICAgICBcbiAgICAgICAgfSx0aGlzKVxuXG4gICAgICAgIHRoaXMuY2hhbGxlbmdlQnV0dG9uTm9lLmdldENoaWxkQnlOYW1lKFwiTmV3IExhYmVsXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGV4dENvbmZpZy5nZXRUZXh0QnlJZEFuZExhbmd1YWdlVHlwZSgxNTEpXG4gICAgfSxcblxuICAgIHN0YXJ0ICgpIHtcbiAgICAgICAgdGhpcy5zZXR1cFVJKClcbiAgICB9LFxuXG4gICAgZ2V0U2VjdGlvbkFuZEluZGV4T2ZMZXZlbCgpIHtcbiAgICAgICAgdmFyIG1haW5TY2VuZU1nciA9IGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuZ2V0Q2hpbGRCeU5hbWUoXCJDYW52YXNcIikuZ2V0Q29tcG9uZW50KFwibWFpblNjZW5lTWdyXCIpXG4gICAgICAgIHZhciBzZWN0aW9uID0gbWFpblNjZW5lTWdyLnNlbGVjdGVkU2VjdGlvblxuICAgICAgICB2YXIgc2VjdGlvbkNvbmZpZyA9IHJlcXVpcmUoXCJzZWN0aW9uQ29uZmlnXCIpXG4gICAgICAgIHZhciBsZXZlbHMgPSBzZWN0aW9uQ29uZmlnW3NlY3Rpb25dLmxldmVsc1xuICAgICAgICB2YXIgaW5kZXggPSBsZXZlbHMuaW5kZXhPZih0aGlzLmxldmVsKSArIDFcbiAgICAgICAgcmV0dXJuIFtzZWN0aW9uLCBpbmRleF1cbiAgICB9LFxuXG4gICAgc2V0dXBVSSgpIHtcbiAgICAgICAgdGhpcy5fc2V0dXBVSUNvbnRlbnQoKVxuICAgICAgICB0aGlzLl9zZXR1cFVJUG9zaXRpb24oKVxuICAgIH0sXG5cbiAgICBfc2V0dXBVSUNvbnRlbnQoKSB7XG4gICAgICAgIC8vdGl0bGUgbGFiZWxcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZ2V0U2VjdGlvbkFuZEluZGV4T2ZMZXZlbCgpXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByZXN1bHRbMF0udG9TdHJpbmcoKSArIFwiIC0gXCIgKyByZXN1bHRbMV1cbiAgICAgICAgXG4gICAgICAgIC8vY29udGVudCBzZWN0aW9uXG4gICAgICAgIHZhciBsZXZlbENvbmZpZyA9IHJlcXVpcmUoXCJsZXZlbENvbmZpZ1wiKVxuICAgICAgICB2YXIgY29uZmlnID0gbGV2ZWxDb25maWdbdGhpcy5sZXZlbF1cbiAgICAgICAgdmFyIGRlc0xhYmVsTm9kZSA9IHRoaXMuY29udGVudFNlY3Rpb25Ob2RlLmdldENoaWxkQnlOYW1lKFwiZGVzTGFiZWxcIilcbiAgICAgICAgZGVzTGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gcmVxdWlyZShcInRleHRDb25maWdcIikuZ2V0VGV4dEJ5SWRBbmRMYW5ndWFnZVR5cGUoY29uZmlnLmRlc1RleHRJZClcbiAgICAgICAgZGVzTGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCkuX2ZvcmNlVXBkYXRlUmVuZGVyRGF0YSgpXG5cbiAgICAgICAgdmFyIHNlcGVyYXRlTGluZVVwTm9kZSA9IHRoaXMuY29udGVudFNlY3Rpb25Ob2RlLmdldENoaWxkQnlOYW1lKFwic2VwZXJhdGVMaW5lVXBcIilcbiAgICAgICAgdmFyIHNlcGVyYXRlTGluZURvd25Ob2RlID0gdGhpcy5jb250ZW50U2VjdGlvbk5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJzZXBlcmF0ZUxpbmVEb3duXCIpXG4gICAgICAgIHZhciBjb250ZW50SGVpZ2h0ID0gZGVzTGFiZWxOb2RlLmhlaWdodCArIDIgKiB0aGlzLmNvbnRlbnRTcGFjZSArIHNlcGVyYXRlTGluZVVwTm9kZS5oZWlnaHQgKyBzZXBlcmF0ZUxpbmVEb3duTm9kZS5oZWlnaHRcbiAgICAgICAgdGhpcy5jb250ZW50U2VjdGlvbk5vZGUuaGVpZ2h0ID0gY29udGVudEhlaWdodFxuXG4gICAgICAgIHNlcGVyYXRlTGluZVVwTm9kZS55ID0gMFxuICAgICAgICBkZXNMYWJlbE5vZGUueSA9IHNlcGVyYXRlTGluZVVwTm9kZS55IC0gc2VwZXJhdGVMaW5lVXBOb2RlLmhlaWdodCAtIHRoaXMuY29udGVudFNwYWNlXG4gICAgICAgIHNlcGVyYXRlTGluZURvd25Ob2RlLnkgPSAtY29udGVudEhlaWdodCArIHNlcGVyYXRlTGluZURvd25Ob2RlLmhlaWdodFxuXG4gICAgICAgIC8vbWFpbFNlY3Rpb25cbiAgICAgICAgdmFyIHRleHRDb25maWcgPSByZXF1aXJlKFwidGV4dENvbmZpZ1wiKVxuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fZ2V0TWFpbFNlY3Rpb25JbmZvKClcbiAgICAgICAgdmFyIG1haWxTZWN0aW9uSGVpZ2h0ID0gMFxuICAgICAgICBmb3IgKHZhciBpbmRleCBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgIHZhciBvbmVDb25maWcgPSByZXN1bHRbaW5kZXhdXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMubWFpbFNlY3Rpb25FbGVtZW50UHJlZmFiKVxuICAgICAgICAgICAgdmFyIGRlc0xhYmVsID0gbm9kZS5nZXRDaGlsZEJ5TmFtZShcImRlc0xhYmVsXCIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0ZXh0U3RyID0gXCJcIlxuICAgICAgICAgICAgaWYgKG9uZUNvbmZpZy50eXBlID09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyB0ZXh0U3RyID0gXCLpgJrlhbPlkI7kvJrmlLbliLAgXCIgKyBvbmVDb25maWcudGFnICsgXCIg5YiG5pSv55qE5paw6YKu5Lu2XCJcbiAgICAgICAgICAgICAgICB0ZXh0U3RyID0gdGV4dENvbmZpZy5nZXRGb3JtYXRlZFN0cmluZygxNDksW29uZUNvbmZpZy50YWddKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob25lQ29uZmlnLnR5cGUgPT0gMikge1xuICAgICAgICAgICAgICAgIC8vIHRleHRTdHIgPSBcIueUqOS4jeWkmuS6jiBcIiArIG9uZUNvbmZpZy5taW5TdGVwICsgXCIg5q2l6YCa5YWz77yM5Lya5pS25YiwIFwiICsgb25lQ29uZmlnLnRhZyArIFwiIOWIhuaUr+eahOaWsOmCruS7tlwiXG4gICAgICAgICAgICAgICAgdGV4dFN0ciA9IHRleHRDb25maWcuZ2V0Rm9ybWF0ZWRTdHJpbmcoMTUwLFtvbmVDb25maWcubWluU3RlcCxvbmVDb25maWcudGFnXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlc0xhYmVsLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGV4dFN0clxuICAgICAgICAgICAgZGVzTGFiZWwuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5fZm9yY2VVcGRhdGVSZW5kZXJEYXRhKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGNvbXBsZXRlSWNvbiA9IG5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJjb21wbGV0ZUljb25cIilcbiAgICAgICAgICAgIGlmIChvbmVDb25maWcuc3RhdHVzID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUljb24uYWN0aXZlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVzTGFiZWwuaGVpZ2h0ID4gY29tcGxldGVJY29uLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0ID0gZGVzTGFiZWwuaGVpZ2h0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlLmhlaWdodCA9IGNvbXBsZXRlSWNvbi5oZWlnaHRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZS55ID0gbWFpbFNlY3Rpb25IZWlnaHRcbiAgICAgICAgICAgIG1haWxTZWN0aW9uSGVpZ2h0ICs9IG5vZGUuaGVpZ2h0XG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gcmVzdWx0Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBtYWlsU2VjdGlvbkhlaWdodCArPSB0aGlzLm1haWxTZWN0aW9uRWxlbWVudERpc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYWlsU2VjdGlvbk5vZGUuYWRkQ2hpbGQobm9kZSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1haWxTZWN0aW9uTm9kZS5oZWlnaHQgPSBtYWlsU2VjdGlvbkhlaWdodFxuXG4gICAgICAgIC8vY2hhbGxlbmdlQnV0dG9uXG4gICAgICAgIHZhciBjb3N0UmVzdWx0ID0gdGhpcy5fZ2V0Q29zdEluZm9PZkNoYWxsZW5nZSgpXG4gICAgICAgIGlmIChjb3N0UmVzdWx0LnR5cGUgPT0gXCJwaHlzaWNhbFBvd2VyXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbGxlbmdlQnV0dG9uTm9lLmdldENoaWxkQnlOYW1lKFwiY29zdEljb25cIikuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmNoYWxsZW5nZUJ1dHRvbkNvc3RQaHlTcHJpdGVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGFsbGVuZ2VCdXR0b25Ob2UuZ2V0Q2hpbGRCeU5hbWUoXCJjb3N0TGFiZWxcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBjb3N0UmVzdWx0Lm51bS50b1N0cmluZygpXG4gICAgICAgIHRoaXMuY29zdFJlc3VsdCA9IGNvc3RSZXN1bHRcbiAgICB9LFxuICAgIF9zZXR1cFVJUG9zaXRpb24oKSB7XG4gICAgICAgIHZhciB0b3RhbEhlaWdodCA9IHRoaXMuZm9vdGVyRGlzICsgdGhpcy50aXRsZUxhYmVsTm9kZS5oZWlnaHQgKyB0aGlzLnNlY3Rpb25EaXMgKyB0aGlzLmNvbnRlbnRTZWN0aW9uTm9kZS5oZWlnaHQgKyB0aGlzLnNlY3Rpb25EaXMgKyB0aGlzLm1haWxTZWN0aW9uTm9kZS5oZWlnaHQgKyB0aGlzLnNlY3Rpb25EaXMgKyB0aGlzLmNoYWxsZW5nZUJ1dHRvbk5vZS5oZWlnaHQgKyB0aGlzLmZvb3RlckRpc1xuICAgICAgICB2YXIgdWliZyA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcIm90aGVyc1wiKS5nZXRDaGlsZEJ5TmFtZShcInVpQmdcIilcbiAgICAgICAgdWliZy5oZWlnaHQgPSB0b3RhbEhlaWdodFxuXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbE5vZGUueSA9IHVpYmcuaGVpZ2h0IC8gMiAtIHRoaXMuaGVhZGVyRGlzXG4gICAgICAgIHRoaXMuY29udGVudFNlY3Rpb25Ob2RlLnkgPSB0aGlzLnRpdGxlTGFiZWxOb2RlLnkgLSB0aGlzLnRpdGxlTGFiZWxOb2RlLmhlaWdodCAtIHRoaXMuc2VjdGlvbkRpc1xuICAgICAgICB0aGlzLm1haWxTZWN0aW9uTm9kZS55ID0gdGhpcy5jb250ZW50U2VjdGlvbk5vZGUueSAtIHRoaXMuY29udGVudFNlY3Rpb25Ob2RlLmhlaWdodCAtIHRoaXMuc2VjdGlvbkRpc1xuICAgICAgICB0aGlzLmNoYWxsZW5nZUJ1dHRvbk5vZS55ID0gdGhpcy5tYWlsU2VjdGlvbk5vZGUueSAtIHRoaXMubWFpbFNlY3Rpb25Ob2RlLmhlaWdodCAtIHRoaXMuc2VjdGlvbkRpcyAtIHRoaXMuY2hhbGxlbmdlQnV0dG9uTm9lLmhlaWdodCAvIDJcbiAgICB9LFxuXG4gICAgX2dldE1haWxTZWN0aW9uSW5mbygpIHtcbiAgICAgICAgdmFyIG1haWxTeXNDb25maWcgPSByZXF1aXJlKFwibWFpbFN5c0NvbmZpZ1wiKVxuICAgICAgICB2YXIgcmVzdWx0ID0gW11cbiAgICAgICAgdmFyIHRleHRDb25maWcgPSByZXF1aXJlKFwidGV4dENvbmZpZ1wiKVxuICAgICAgICBmb3IgKHZhciB0YWcgaW4gbWFpbFN5c0NvbmZpZykge1xuICAgICAgICAgICAgdmFyIG9uZUNvbmZpZyA9IG1haWxTeXNDb25maWdbdGFnXVxuICAgICAgICAgICAgdmFyIGNvbmRpdGlvbnMgPSBvbmVDb25maWcuY29uZGl0aW9uc1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRDb25kaXRpb25JbmRleCA9IHJlcXVpcmUoXCJkYXRhTWdyXCIpLnBsYXllckRhdGEubWFpbENvbmRpdGlvbkluZGV4W3RhZ11cbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgb25lQ29uZGl0aW9uQ29uZmlnID0gY29uZGl0aW9uc1tpbmRleF1cbiAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uVHlwZSA9IG9uZUNvbmRpdGlvbkNvbmZpZy5jb25kaXRpb25UeXBlXG4gICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvblBhcmEgPSBvbmVDb25kaXRpb25Db25maWcuY29uZGl0aW9uUGFyYVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGlmIChjb25kaXRpb25QYXJhID09IHRoaXMubGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdmFyIG9uZVJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRhZzogb25lQ29uZmlnLnRhZ05hbWUsXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzdGF0dXM6IG51bGxcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgdmFyIG9uZVJlc3VsdCA9IG51bGxcbiAgICAgICAgICAgICAgICBpZiAoKGNvbmRpdGlvblR5cGUgPT0gMSAmJiBjb25kaXRpb25QYXJhID09IHRoaXMubGV2ZWwpIHx8IChjb25kaXRpb25UeXBlID09IDIgJiYgY29uZGl0aW9uUGFyYS5sZXZlbElkID09IHRoaXMubGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uZVJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhZzogb25lQ29uZmlnLnRhZ05hbWVUZXh0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IHRleHRDb25maWcuZ2V0VGV4dEJ5SWRBbmRMYW5ndWFnZVR5cGUob25lQ29uZmlnLnRhZ05hbWVUZXh0SWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY29uZGl0aW9uVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblN0ZXA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob25lUmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBjdXJyZW50Q29uZGl0aW9uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgb25lUmVzdWx0LnN0YXR1cyA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uZVJlc3VsdC5zdGF0dXMgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25UeXBlID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgb25lUmVzdWx0Lm1pblN0ZXAgPSBjb25kaXRpb25QYXJhLm1pblN0ZXBOdW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob25lUmVzdWx0KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSxcblxuICAgIF9nZXRDb3N0SW5mb09mQ2hhbGxlbmdlKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdHlwZTogXCJwaHlzaWNhbFBvd2VyXCIsXG4gICAgICAgICAgICBudW06IDBcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGV2ZWxDb25maWcgPSByZXF1aXJlKFwibGV2ZWxDb25maWdcIilcbiAgICAgICAgaWYgKHRoaXMubGV2ZWxTdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgcmVzdWx0LnR5cGUgPSBcImhlYXJ0XCJcbiAgICAgICAgICAgIHJlc3VsdC5udW0gPSBsZXZlbENvbmZpZ1t0aGlzLmxldmVsXS5oZWFydEZvclJldHJ5Q29zdFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubGV2ZWxTdGF0dXMgPT0gMikge1xuICAgICAgICAgICAgdmFyIGZsYWcgPSByZXF1aXJlKFwiZGF0YU1nclwiKS5wbGF5ZXJEYXRhLnBoeXNpY2FsUG93ZXJDb3N0ZWRGbGFnXG4gICAgICAgICAgICBpZiAoZmxhZyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnR5cGUgPSBcInBoeXNpY2FsUG93ZXJcIlxuICAgICAgICAgICAgICAgIHJlc3VsdC5udW0gPSBsZXZlbENvbmZpZ1t0aGlzLmxldmVsXS5waHlzaWNhbFBvd2VyQ29zdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZmxhZyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnR5cGUgPSBcImhlYXJ0XCJcbiAgICAgICAgICAgICAgICByZXN1bHQubnVtID0gbGV2ZWxDb25maWdbdGhpcy5sZXZlbF0uaGVhcnRGb3JSZXRyeUNvc3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9LFxuXG4gICAgb25DbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuY29zdFJlc3VsdCA9PSBudWxsIHx8IHRoaXMuY29zdFJlc3VsdC5udW0gPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbHVlTnVtID0gbnVsbFxuICAgICAgICBpZiAodGhpcy5jb3N0UmVzdWx0LnR5cGUgPT0gXCJoZWFydFwiKSB7XG4gICAgICAgICAgICB2YWx1ZU51bSA9IHJlcXVpcmUoXCJkYXRhTWdyXCIpLnBsYXllckRhdGEuaGVhcnQgLSB0aGlzLmNvc3RSZXN1bHQubnVtXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jb3N0UmVzdWx0LnR5cGUgPT0gXCJwaHlzaWNhbFBvd2VyXCIpIHtcbiAgICAgICAgICAgIHZhbHVlTnVtID0gcmVxdWlyZShcImRhdGFNZ3JcIikucGxheWVyRGF0YS5waHlzaWNhbFBvd2VyIC0gdGhpcy5jb3N0UmVzdWx0Lm51bVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlTnVtID09IG51bGwgfHwgdmFsdWVOdW0gPCAwKSB7XG4gICAgICAgICAgICB2YXIgbm90aWZpY2FpdGlvblN5cyA9IHJlcXVpcmUoXCJub3RpZmljYXRpb25NZ3JcIilcbiAgICAgICAgICAgIHZhciBub3RpU3RyID0gXCJcIlxuICAgICAgICAgICAgaWYgKHRoaXMuY29zdFJlc3VsdC50eXBlID09IFwiaGVhcnRcIikge1xuICAgICAgICAgICAgICAgIG5vdGlTdHIgPSBcIumHkeW4geS4jei2s1wiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNvc3RSZXN1bHQudHlwZSA9PSBcInBoeXNpY2FsUG93ZXJcIikge1xuICAgICAgICAgICAgICAgIG5vdGlTdHIgPSBcIuS9k+WKm+S4jei2s1wiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub3RpZmljYWl0aW9uU3lzLnNob3dOb3RpKG5vdGlTdHIpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciBuZXR3b3JrTWdyID0gcmVxdWlyZShcIm5ldHdvcmtNZ3JcIilcbiAgICAgICAgdmFyIG1lc3NhZ2VPYmogPSBuZXR3b3JrTWdyLm1ha2VNZXNzYWdlT2JqKFwiZGF0YU1vZHVsZVwiLFwiY29tbWl0TWVzc2FnZVR5cFwiKVxuICAgICAgICBtZXNzYWdlT2JqLm1lc3NhZ2UucGxheWVySWQgPSByZXF1aXJlKFwiZGF0YU1nclwiKS5wbGF5ZXJEYXRhLmlkXG4gICAgICAgIHZhciBjb21taXRCb2R5ID0gbnVsbFxuICAgICAgICBpZiAodGhpcy5jb3N0UmVzdWx0LnR5cGUgPT0gXCJoZWFydFwiKSB7XG4gICAgICAgICAgICBjb21taXRCb2R5ID0ge1xuICAgICAgICAgICAgICAgIFwiaGVhcnRcIjogcmVxdWlyZShcImRhdGFNZ3JcIikucGxheWVyRGF0YS5oZWFydCAtIHRoaXMuY29zdFJlc3VsdC5udW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29zdFJlc3VsdC50eXBlID09IFwicGh5c2ljYWxQb3dlclwiKSB7XG4gICAgICAgICAgICBjb21taXRCb2R5ID0ge1xuICAgICAgICAgICAgICAgIFwicGh5c2ljYWxQb3dlclwiOiByZXF1aXJlKFwiZGF0YU1nclwiKS5wbGF5ZXJEYXRhLnBoeXNpY2FsUG93ZXIgLSB0aGlzLmNvc3RSZXN1bHQubnVtXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtZXNzYWdlT2JqLm1lc3NhZ2UuY29tbWl0Qm9keSA9IGNvbW1pdEJvZHlcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzXG4gICAgICAgIG1lc3NhZ2VPYmouc3VjY2Vzc0NhbGxCYWNrID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvc3RSZXN1bHQudHlwZSA9PSBcImhlYXJ0XCIpIHtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFwiZGF0YU1nclwiKS5wbGF5ZXJEYXRhLmhlYXJ0ID0gY29tbWl0Qm9keS5oZWFydFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb3N0UmVzdWx0LnR5cGUgPT0gXCJwaHlzaWNhbFBvd2VyXCIpIHtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFwiZGF0YU1nclwiKS5wbGF5ZXJEYXRhLnBoeXNpY2FsUG93ZXIgPSBjb21taXRCb2R5LnBoeXNpY2FsUG93ZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc2VsZi5jaGFsbGVuZ2VCdXR0b25Ob2UuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbikuaW50ZXJhY3RhYmxlID0gdHJ1ZVxuICAgICAgICAgICAgcmVxdWlyZShcImdhbWVNZ3JcIikuZW50ZXJMZXZlbFNjZW5lKHNlbGYubGV2ZWwpXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNoYWxsZW5nZUJ1dHRvbk5vZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKS5pbnRlcmFjdGFibGUgPSBmYWxzZVxuICAgICAgICBuZXR3b3JrTWdyLnNlbmRNZXNzYWdlQnlNc2dPYmoobWVzc2FnZU9iailcbiAgICB9XG4gICAgLy8gdXBkYXRlIChkdCkge30sXG59KTtcbiJdfQ==