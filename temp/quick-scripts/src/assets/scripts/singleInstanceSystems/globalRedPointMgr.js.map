{"version":3,"sources":["assets/scripts/singleInstanceSystems/globalRedPointMgr.js"],"names":["GlobalRedPointMgr","cc","Class","Component","properties","currentRedPointMgrs","setupRedPoints","getRedPointMgrs","index","oneRedPointMgr","setupRedPoint","currentScene","director","getScene","self","temp","givenRootNode","children","oneChildNode","getComponent","push","getChildByName","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,iBAAiB,GAAGC,EAAE,CAACC,KAAH,CAAS;AAC7B,aAASD,EAAE,CAACE,SADiB;AAG7BC,EAAAA,UAAU,EAAE;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,mBAAmB,EAAE;AAhBb,GAHiB;AAsB7BC,EAAAA,cAtB6B,4BAsBZ;AACb,SAAKC,eAAL;;AACA,SAAK,IAAIC,KAAT,IAAkB,KAAKH,mBAAvB,EAA4C;AACxC,UAAII,cAAc,GAAG,KAAKJ,mBAAL,CAAyBG,KAAzB,CAArB;;AACA,UAAI,OAAOC,cAAc,CAACC,aAAtB,KAAwC,UAA5C,EAAwD;AACpDD,QAAAA,cAAc,CAACC,aAAf;AACH;AACJ;AACJ,GA9B4B;AAgC7BH,EAAAA,eAhC6B,6BAgCX;AACd,SAAKF,mBAAL,GAA2B,EAA3B;AACA,QAAIM,YAAY,GAAGV,EAAE,CAACW,QAAH,CAAYC,QAAZ,EAAnB;AACA,QAAIC,IAAI,GAAG,IAAX;;AACA,QAAIC,IAAI,GAAG,SAAPA,IAAO,CAASC,aAAT,EAAwB;AAC/B,WAAK,IAAIR,KAAT,IAAkBQ,aAAa,CAACC,QAAhC,EAA0C;AACtC,YAAIC,YAAY,GAAGF,aAAa,CAACC,QAAd,CAAuBT,KAAvB,CAAnB;AACA,YAAIC,cAAc,GAAGS,YAAY,CAACC,YAAb,CAA0B,aAA1B,CAArB;;AACA,YAAIV,cAAc,IAAI,IAAtB,EAA4B;AACxBK,UAAAA,IAAI,CAACT,mBAAL,CAAyBe,IAAzB,CAA8BX,cAA9B;AACH;;AACDM,QAAAA,IAAI,CAACG,YAAD,CAAJ;AACH;AACJ,KATD;;AAWAH,IAAAA,IAAI,CAACJ,YAAY,CAACU,cAAb,CAA4B,QAA5B,CAAD,CAAJ;AACH;AAhD4B,CAAT,CAAxB;AAmDAC,MAAM,CAACC,OAAP,GAAiB,IAAIvB,iBAAJ,EAAjB","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar GlobalRedPointMgr = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        currentRedPointMgrs: []\n    },\n\n    setupRedPoints() {\n        this.getRedPointMgrs()\n        for (var index in this.currentRedPointMgrs) {\n            var oneRedPointMgr = this.currentRedPointMgrs[index]\n            if (typeof oneRedPointMgr.setupRedPoint === \"function\") {\n                oneRedPointMgr.setupRedPoint()\n            }\n        }\n    },\n\n    getRedPointMgrs() {\n        this.currentRedPointMgrs = []\n        var currentScene = cc.director.getScene()\n        var self = this\n        var temp = function(givenRootNode) {\n            for (var index in givenRootNode.children) {\n                var oneChildNode = givenRootNode.children[index]\n                var oneRedPointMgr = oneChildNode.getComponent(\"redPointMgr\")\n                if (oneRedPointMgr != null) {\n                    self.currentRedPointMgrs.push(oneRedPointMgr)\n                }\n                temp(oneChildNode)\n            }\n        }\n\n        temp(currentScene.getChildByName(\"Canvas\"))\n    }\n});\n\nmodule.exports = new GlobalRedPointMgr()\n"]}