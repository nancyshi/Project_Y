{"version":3,"sources":["assets/scripts/mainScene/preChallengeUIMgr.js"],"names":["cc","Class","Component","properties","headerDis","footerDis","sectionDis","contentSpace","mailSectionElementDis","titleLabelNode","Node","challengeButtonNoe","contentSectionNode","mailSectionNode","closeButtonNode","mailSectionElementPrefab","Prefab","challengeButtonCostPhySprite","SpriteFrame","level","levelStatus","costResult","delegate","onLoad","textConfig","require","bg","node","getChildByName","width","winSize","height","on","self","preChanllengeUIOpend","log","destroy","getComponent","Label","string","getTextByIdAndLanguageType","start","setupUI","getSectionAndIndexOfLevel","mainSceneMgr","director","getScene","section","selectedSection","sectionConfig","levels","index","indexOf","_setupUIContent","_setupUIPosition","result","toString","levelConfig","config","desLabelNode","_forceUpdateRenderData","seperateLineUpNode","seperateLineDownNode","contentHeight","y","_getMailSectionInfo","mailSectionHeight","_getCostInfoOfChallenge","type","Sprite","spriteFrame","num","totalHeight","uibg","mailSysConfig","tag","oneConfig","conditions","currentConditionIndex","playerData","mailConditionIndex","oneConditionConfig","conditionType","conditionPara","oneResult","levelId","tagNameTextId","status","minStep","minStepNum","push","heartForRetryCost","flag","physicalPowerCostedFlag","physicalPowerCost","welfaryFlag","initAdWatchedFlag","Math","round","onClick","valueNum","heart","physicalPower","notificaitionSys","notiStr","pushNoti","networkMgr","messageObj","makeMessageObj","message","playerId","id","commitBody","successCallBack","enterLevelScene","Button","interactable","sendMessageByMsgObj"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        headerDis: 83,\n        footerDis: 124,\n        sectionDis: 66,\n        contentSpace: 99,\n        mailSectionElementDis: 30,\n\n        titleLabelNode: cc.Node,\n        challengeButtonNoe: cc.Node,\n        contentSectionNode: cc.Node,\n        mailSectionNode: cc.Node,\n        closeButtonNode: cc.Node,\n        mailSectionElementPrefab: cc.Prefab,\n        challengeButtonCostPhySprite: cc.SpriteFrame,\n\n        level: null,\n        levelStatus: null,\n        costResult: null,\n        delegate: null\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var textConfig = require(\"textConfig\")\n        var bg = this.node.getChildByName(\"bg\")\n        bg.width = cc.winSize.width\n        bg.height = cc.winSize.height\n        bg.on(\"touchstart\",function(){},this)\n\n        var self = this\n        this.closeButtonNode.on(\"click\",function(){\n            if (self.delegate != null) {\n                self.delegate.preChanllengeUIOpend = false\n            }\n            else {\n                cc.log(\"delegate is null\")\n            }\n            self.node.destroy()     \n        },this)\n\n        this.challengeButtonNoe.getChildByName(\"New Label\").getComponent(cc.Label).string = textConfig.getTextByIdAndLanguageType(151)\n    },\n\n    start () {\n        this.setupUI()\n    },\n\n    getSectionAndIndexOfLevel() {\n        var mainSceneMgr = cc.director.getScene().getChildByName(\"Canvas\").getComponent(\"mainSceneMgr\")\n        var section = mainSceneMgr.selectedSection\n        var sectionConfig = require(\"sectionConfig\")\n        var levels = sectionConfig[section].levels\n        var index = levels.indexOf(this.level) + 1\n        return [section, index]\n    },\n\n    setupUI() {\n        this._setupUIContent()\n        this._setupUIPosition()\n    },\n\n    _setupUIContent() {\n        //title label\n        var result = this.getSectionAndIndexOfLevel()\n        this.titleLabelNode.getComponent(cc.Label).string = result[0].toString() + \" - \" + result[1]\n        \n        //content section\n        var levelConfig = require(\"levelConfig\")\n        var config = levelConfig[this.level]\n        var desLabelNode = this.contentSectionNode.getChildByName(\"desLabel\")\n        //desLabelNode.getComponent(cc.Label).string = require(\"textConfig\").getTextByIdAndLanguageType(config.desTextId)\n        desLabelNode.getComponent(cc.Label).string = this.titleLabelNode.getComponent(cc.Label).string\n        desLabelNode.getComponent(cc.Label)._forceUpdateRenderData()\n\n        var seperateLineUpNode = this.contentSectionNode.getChildByName(\"seperateLineUp\")\n        var seperateLineDownNode = this.contentSectionNode.getChildByName(\"seperateLineDown\")\n        var contentHeight = desLabelNode.height + 2 * this.contentSpace + seperateLineUpNode.height + seperateLineDownNode.height\n        this.contentSectionNode.height = contentHeight\n\n        seperateLineUpNode.y = 0\n        desLabelNode.y = seperateLineUpNode.y - seperateLineUpNode.height - this.contentSpace\n        seperateLineDownNode.y = -contentHeight + seperateLineDownNode.height\n\n        //mailSection\n        var textConfig = require(\"textConfig\")\n        var result = this._getMailSectionInfo()\n        var mailSectionHeight = 0\n        // for (var index in result) {\n        //     var oneConfig = result[index]\n        //     var node = cc.instantiate(this.mailSectionElementPrefab)\n        //     var desLabel = node.getChildByName(\"desLabel\")\n            \n        //     var textStr = \"\"\n        //     if (oneConfig.type == 1) {\n        //         // textStr = \"通关后会收到 \" + oneConfig.tag + \" 分支的新邮件\"\n        //         textStr = textConfig.getFormatedString(149,[oneConfig.tag])\n        //     }\n        //     else if (oneConfig.type == 2) {\n        //         // textStr = \"用不多于 \" + oneConfig.minStep + \" 步通关，会收到 \" + oneConfig.tag + \" 分支的新邮件\"\n        //         textStr = textConfig.getFormatedString(150,[oneConfig.minStep,oneConfig.tag])\n        //     }\n        //     desLabel.getComponent(cc.Label).string = textStr\n        //     desLabel.getComponent(cc.Label)._forceUpdateRenderData()\n            \n        //     var completeIcon = node.getChildByName(\"completeIcon\")\n        //     if (oneConfig.status == true) {\n        //         completeIcon.active = true\n        //     }\n\n        //     if (desLabel.height > completeIcon.height) {\n        //         node.height = desLabel.height\n        //     }\n        //     else {\n        //         node.height = completeIcon.height\n        //     }\n\n        //     node.y = mailSectionHeight\n        //     mailSectionHeight += node.height\n        //     if (index != result.length - 1) {\n        //         mailSectionHeight += this.mailSectionElementDis\n        //     }\n        //     this.mailSectionNode.addChild(node)\n        // }\n        this.mailSectionNode.height = mailSectionHeight\n\n        //challengeButton\n        var costResult = this._getCostInfoOfChallenge()\n        if (costResult.type == \"physicalPower\") {\n            this.challengeButtonNoe.getChildByName(\"costIcon\").getComponent(cc.Sprite).spriteFrame = this.challengeButtonCostPhySprite\n        }\n        \n        this.challengeButtonNoe.getChildByName(\"costLabel\").getComponent(cc.Label).string = costResult.num.toString()\n        this.costResult = costResult\n    },\n    _setupUIPosition() {\n        var totalHeight = this.footerDis + this.titleLabelNode.height + this.sectionDis + this.contentSectionNode.height + this.sectionDis + this.mailSectionNode.height + this.sectionDis + this.challengeButtonNoe.height + this.footerDis\n        var uibg = this.node.getChildByName(\"others\").getChildByName(\"uiBg\")\n        uibg.height = totalHeight\n\n        this.titleLabelNode.y = uibg.height / 2 - this.headerDis\n        this.contentSectionNode.y = this.titleLabelNode.y - this.titleLabelNode.height - this.sectionDis\n        this.mailSectionNode.y = this.contentSectionNode.y - this.contentSectionNode.height - this.sectionDis\n        this.challengeButtonNoe.y = this.mailSectionNode.y - this.mailSectionNode.height - this.sectionDis - this.challengeButtonNoe.height / 2\n    },\n\n    _getMailSectionInfo() {\n        var mailSysConfig = require(\"mailSysConfig\")\n        var result = []\n        var textConfig = require(\"textConfig\")\n        for (var tag in mailSysConfig) {\n            var oneConfig = mailSysConfig[tag]\n            var conditions = oneConfig.conditions\n            var currentConditionIndex = require(\"dataMgr\").playerData.mailConditionIndex[tag]\n            for (var index in conditions) {\n                var oneConditionConfig = conditions[index]\n                var conditionType = oneConditionConfig.conditionType\n                var conditionPara = oneConditionConfig.conditionPara\n                \n                // if (conditionPara == this.level) {\n                //     var oneResult = {\n                //         tag: oneConfig.tagName,\n                //         status: null\n                //     }\n                    \n                // }\n                var oneResult = null\n                if ((conditionType == 1 && conditionPara == this.level) || (conditionType == 2 && conditionPara.levelId == this.level)) {\n                    oneResult = {\n                        // tag: oneConfig.tagNameTextId,\n                        tag: textConfig.getTextByIdAndLanguageType(oneConfig.tagNameTextId),\n                        type: conditionType,\n                        status: null,\n                        minStep: null\n                    }\n                }\n                if (oneResult == null) {\n                    continue\n                }\n\n                if (index < currentConditionIndex) {\n                    oneResult.status = true\n                }\n                else {\n                    oneResult.status = false\n                }\n\n                if (conditionType == 2) {\n                    oneResult.minStep = conditionPara.minStepNum\n                }\n                result.push(oneResult)\n                break\n            }\n        }\n\n        return result\n    },\n\n    _getCostInfoOfChallenge() {\n        var result = {\n            type: \"physicalPower\",\n            num: 0\n        }\n        var levelConfig = require(\"levelConfig\")\n        if (this.levelStatus == 1) {\n            result.type = \"heart\"\n            result.num = levelConfig[this.level].heartForRetryCost\n        }\n        else if (this.levelStatus == 2) {\n            var flag = require(\"dataMgr\").playerData.physicalPowerCostedFlag\n            if (flag == 0) {\n                result.type = \"physicalPower\"\n                result.num = levelConfig[this.level].physicalPowerCost\n                var welfaryFlag = require(\"dataMgr\").playerData.initAdWatchedFlag\n                if (welfaryFlag == 1) {\n                    result.num = Math.round(result.num / 2)\n                }\n            }\n            else if (flag == 1) {\n                result.type = \"heart\"\n                result.num = levelConfig[this.level].heartForRetryCost\n            }\n        }\n\n        return result\n    },\n\n    onClick() {\n        if (this.costResult == null || this.costResult.num == 0) {\n            return\n        }\n        var valueNum = null\n        if (this.costResult.type == \"heart\") {\n            valueNum = require(\"dataMgr\").playerData.heart - this.costResult.num\n        }\n        else if (this.costResult.type == \"physicalPower\") {\n            valueNum = require(\"dataMgr\").playerData.physicalPower - this.costResult.num\n        }\n\n        if (valueNum == null || valueNum < 0) {\n            var notificaitionSys = require(\"notificationMgr\")\n            var notiStr = \"\"\n            if (this.costResult.type == \"heart\") {\n                notiStr = require(\"textConfig\").getTextByIdAndLanguageType(169)\n            }\n            else if (this.costResult.type == \"physicalPower\") {\n                notiStr = require(\"textConfig\").getTextByIdAndLanguageType(170)\n            }\n            notificaitionSys.pushNoti(notiStr)\n            return\n        }\n        \n        \n        var networkMgr = require(\"networkMgr\")\n        var messageObj = networkMgr.makeMessageObj(\"dataModule\",\"commitMessageTyp\")\n        messageObj.message.playerId = require(\"dataMgr\").playerData.id\n        var commitBody = null\n        if (this.costResult.type == \"heart\") {\n            commitBody = {\n                \"heart\": require(\"dataMgr\").playerData.heart - this.costResult.num\n            }\n        }\n\n        else if (this.costResult.type == \"physicalPower\") {\n            commitBody = {\n                \"physicalPower\": require(\"dataMgr\").playerData.physicalPower - this.costResult.num\n            }\n        }\n\n        messageObj.message.commitBody = commitBody\n        var self = this\n        messageObj.successCallBack = function(){\n            if (self.costResult.type == \"heart\") {\n                require(\"dataMgr\").playerData.heart = commitBody.heart\n            }\n            else if (self.costResult.type == \"physicalPower\") {\n                require(\"dataMgr\").playerData.physicalPower = commitBody.physicalPower\n            }\n            \n            // self.challengeButtonNoe.getComponent(cc.Button).interactable = true\n            require(\"gameMgr\").enterLevelScene(self.level)\n        }\n\n        this.challengeButtonNoe.getComponent(cc.Button).interactable = false\n        networkMgr.sendMessageByMsgObj(messageObj)\n    }\n    // update (dt) {},\n});\n"]}